<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="I CAN MAKE THIS WORK RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="I CAN MAKE THIS WORK Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-51754530-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="icon" href="/img/favicon/profile.jpg">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="rgb(37, 194, 160)">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/img/favicon/apple-touch-icon.png"><title data-react-helmet="true">I CAN MAKE THIS WORK | I CAN MAKE THIS WORK</title><meta data-react-helmet="true" property="og:title" content="I CAN MAKE THIS WORK | I CAN MAKE THIS WORK"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://blog.johnnyreilly.com/img/profile.png"><meta data-react-helmet="true" name="twitter:image" content="https://blog.johnnyreilly.com/img/profile.png"><meta data-react-helmet="true" name="description" content="The blog of johnnyreilly"><meta data-react-helmet="true" property="og:description" content="The blog of johnnyreilly"><meta data-react-helmet="true" property="og:url" content="https://blog.johnnyreilly.com/page/206"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="blog_posts_list"><meta data-react-helmet="true" name="robots" content="max-image-preview:large"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://blog.johnnyreilly.com/page/206"><link data-react-helmet="true" rel="alternate" href="https://blog.johnnyreilly.com/page/206" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://blog.johnnyreilly.com/page/206" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.ff16c2af.css">
<link rel="preload" href="/assets/js/runtime~main.80227799.js" as="script">
<link rel="preload" href="/assets/js/main.14ca547e.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">I CAN MAKE THIS WORK</b></a><a class="navbar__item navbar__link" href="/about">About</a><a class="navbar__item navbar__link" href="/blog-archive">Blog Archive</a><a class="navbar__item navbar__link" href="/talks">Talks</a></div><div class="navbar__items navbar__items--right"><a href="https://polywork.johnnyreilly.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Polywork<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/johnnyreilly" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://twitter.com/johnny_reilly" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">ðŸŒœ</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">ðŸŒž</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-list-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_2ahu thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_2hhb margin-bottom--md">Recent posts</div><ul class="sidebarItemList_2xAf"><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/2021/12/05/azure-static-web-app-deploy-previews-with-azure-devops">Azure Static Web App Deploy Previews with Azure DevOps</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/2021/11/22/typescript-vs-jsdoc-javascript">TypeScript vs JSDoc JavaScript</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/2021/11/18/azure-standard-tests-with-bicep">Azure standard availability tests with Bicep</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/2021/10/31/nswag-generated-c-sharp-client-property-name-clash">NSwag generated C# client: Open API property name clashes and decimal types rather than double</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/2021/10/18/docusaurus-meta-tags-and-google-discover">Docusaurus, meta tags and Google Discover</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/2013/04/01/death-to-compatibility-mode">Death to compatibility mode</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2013-04-01T00:00:00.000Z" itemprop="datePublished">April 1, 2013</time> Â· <!-- -->7 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://twitter.com/johnny_reilly" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://blog.johnnyreilly.com/img/profile.jpg" alt="John Reilly"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://twitter.com/johnny_reilly" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">John Reilly</span></a></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>For just over 10 years my bread and butter has been the development and maintenance of line of business apps. More particularly, web apps built on the Microsoft stack of love (<a href="https://channel9.msdn.com/Events/MIX/MIX11/FRM02" target="_blank" rel="noopener noreferrer">Â© Scott Hanselman</a>). These sort of apps are typically accessed via the company intranet and since &quot;bring your own device&quot; is still a relatively new innovation these apps are invariably built for everyones favourite browser: Internet Explorer. As we all know, enterprises are generally not that speedy when it comes to upgrades. So we&#x27;re basically talking IE 9 at best, but more often than not, IE 8.</p><p>Now, unlike many people, I don&#x27;t regard IE as a work of evil. I spent a fair number of years working for an organization which had IE 6 as the only installed browser on company desktops. (In fact, this was still the case as late as 2012!) Now, because JavaScript is so marvellously flexible I was still able to do a great deal with the help of a number of <a href="http://paulirish.com/2011/the-history-of-the-html5-shiv/" target="_blank" rel="noopener noreferrer">shivs / shims</a>.</p><p>But rendering and CSS - well that&#x27;s another matter. Because here we&#x27;re at the mercy of &quot;compatibility mode&quot;. Perhaps a quick history lesson is in order. What is this &quot;compatibility mode&quot; of which you speak?</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="a-brief-history">A Brief History<a aria-hidden="true" class="hash-link" href="#a-brief-history" title="Direct link to heading">â€‹</a></h2><p>Well it all started when Microsoft released IE 8. To quote them:</p><blockquote><p><em>A fundamental problem discussed during each and every Internet Explorer release is balancing new features and functionality with site compatibility for the existing Web. On the one hand, new features and functionality push the Web forward. On the other hand, the Web is a large expanse; requiring every legacy page to support the &quot;latest and greatest&quot; browser version immediately at product launch just isn&#x27;t feasible. Internet Explorer 8 addresses this challenge by introducing compatibility modes which gives a way to introduce new features and stricter compliance to standards while enabling it to be backward compliant.</em> <!-- -->-<!-- --> excerpted from <a href="https://blogs.msdn.com/b/askie/archive/2009/03/23/understanding-compatibility-modes-in-internet-explorer-8.aspx" target="_blank" rel="noopener noreferrer">understanding compatibility modes in Internet Explorer 8</a>.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_31ik" id="theres-the-rub">There&#x27;s the rub<a aria-hidden="true" class="hash-link" href="#theres-the-rub" title="Direct link to heading">â€‹</a></h2><p>Sounds fair enough? Of course it does. Microsoft have generally bent over backwards to facilitate backwards compatibility. Quite right too - good business sense and all that. However, one of the choices made around backwards compatibility I&#x27;ve come to regard as somewhat irksome. Later down in the article you&#x27;ll find this doozy: (emphasis mine)</p><blockquote><p><em>&quot;<strong>for Intranet pages, 7 (IE 7 Standards) rendering mode is used by default</strong> and can be changed.&quot;</em></p></blockquote><p>For whatever reason, this decision was not particularly well promoted. As a result, a fair number of devs I&#x27;ve encountered have little or no knowledge of compatibility mode. Certainly it came as a surprise to me. Here was I, developing away on my desktop. I&#x27;d fire up the app hosted on my machine and test on my local install of IE 8. All would look new and shiny (well non-anchor tags would have <code>:hover</code> support). Happy and content, I&#x27;d push to our test system and browse to it. Wait, what&#x27;s happened? Where&#x27;s the new style rendering? What&#x27;s up with my CSS? This is a bug right?</p><p>Obviously I know now it&#x27;s not a bug it&#x27;s a &quot;feature&quot;. And I have learned how to get round the intranet default of compatibility mode through cunning deployment of meta tags and custom http headers. Recently compatibility mode has come to bite me for the second time (in this case I was building for IE 9 and was left wondering where all my rounded corners had vanished to when I deployed...).</p><p>For my own sanity I thought it might be good to document the various ways that exist to solve this particular problem. Just to clarify terms, &quot;solve&quot; in this context means &quot;force IE to render in the most standards compliant / like other browsers fashion it can muster&quot;. You can use compatibility mode to do more than just that and if you&#x27;re interested in more about this then I recommend <a href="http://stackoverflow.com/a/6771584/761388" target="_blank" rel="noopener noreferrer">this Stack Overflow answer</a>.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="solution-1-custom-http-header-through-webconfig">Solution 1: Custom HTTP Header through web.config<a aria-hidden="true" class="hash-link" href="#solution-1-custom-http-header-through-webconfig" title="Direct link to heading">â€‹</a></h2><p>If you&#x27;re running IIS7 or greater then, for my money, this is the simplest and most pain free solution. All you need do is include the following snippet in your web config file:</p><script src="https://gist.github.com/johnnyreilly/5283462.js?file=web.config"></script><p>This will make IIS serve up the above custom response HTTP header with each page.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="solution-2-custom-http-header-the-hard-way">Solution 2: Custom HTTP Header the hard way<a aria-hidden="true" class="hash-link" href="#solution-2-custom-http-header-the-hard-way" title="Direct link to heading">â€‹</a></h2><p>Maybe you&#x27;re running II6 and so you making a change to the web.config won&#x27;t make a difference. That&#x27;s fine, you can still get the same behaviour by going to the HTTP headers tab in IIS (see below) and adding the <code>X-UA-Compatible: IE=edge</code> header by hand.</p><p><img src="https://4.bp.blogspot.com/-78CYavaCiUk/UVlGNv87U_I/AAAAAAAAAZQ/qtchMc14JsY/s320/CustomHeadersIIS6.gif"></p><p>Or, if you don&#x27;t have access to IIS (don&#x27;t laugh - it happens) you can fall back to doing this in code like this:</p><script src="https://gist.github.com/johnnyreilly/5283462.js?file=servingUpTheHardWay.cs"></script><p>Obviously there&#x27;s a whole raft of ways you could get this in, using <code>Application_BeginRequest</code> in <code>Global.asax.cs</code> would probably as good an approach as any.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="solution-3-meta-tags-are-go">Solution 3: Meta Tags are go!<a aria-hidden="true" class="hash-link" href="#solution-3-meta-tags-are-go" title="Direct link to heading">â€‹</a></h2><p>The final approach uses meta tags. And, in my experience it is the most quirky approach - it doesn&#x27;t always seem to work. First up, what do we do? Well, in each page served we include the following meta tag like this:</p><script src="https://gist.github.com/johnnyreilly/5283462.js?file=any.html"></script><p>Having crawled over the WWW equivalent of broken glass I now know why this <!-- -->*<strong>sometimes</strong>*<!-- --> doesn&#x27;t work. (And credit where it&#x27;s due the answer came from <a href="http://stackoverflow.com/a/3960197/761388" target="_blank" rel="noopener noreferrer">here</a>.) It&#x27;s all down to the positioning of the meta tag:</p><blockquote><p><em>The X-UA-compatible header is not case sensitive; however, it must appear in the Web page&#x27;s header (the HEAD section) before all other elements, except for the title element and other meta elements.</em> <!-- -->-<!-- --> excerpted from <a href="http://msdn.microsoft.com/en-gb/library/jj676915(v=vs.85).aspx" target="_blank" rel="noopener noreferrer">specifying legacy document modes</a></p></blockquote><p>That&#x27;s right, get your meta tag in the wrong place and things won&#x27;t work. And you won&#x27;t know why. Lovely. But get it right and it&#x27;s all gravy. This remains the most unsatisfactory approach in my book though.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="and-for-bonus-points-iframes">And for bonus points: <code>IFRAME</code>s!<a aria-hidden="true" class="hash-link" href="#and-for-bonus-points-iframes" title="Direct link to heading">â€‹</a></h2><p>Before I finish off I thought it worth sharing a little known feature of <code>IFRAME</code>s. If page is running in compatibility mode and it contains an <code>IFRAME</code> then the page loaded in that <code>IFRAME</code> will <strong>also run in compatibility mode</strong>. No ifs, no buts.</p><p>In the case that I encountered this behaviour, the application was being hosted in an <code>IFRAME</code> inside Sharepoint. Because of the way our Sharepoint was configured it ended up that the only real game in town for us was the meta tags approach - which happily worked once we&#x27;d correctly placed our meta tag.</p><p>Again, it&#x27;s lamentable that this behaviour isn&#x27;t better documented - hopefully the act of writing this here will mean that it becomes a little better known. There&#x27;s probably a good reason for this behaviour, though I&#x27;m frankly, I don&#x27;t know what it is. If anyone does, I&#x27;d be interested.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="thats-it">That&#x27;s it<a aria-hidden="true" class="hash-link" href="#thats-it" title="Direct link to heading">â€‹</a></h2><p>Armed with the above I hope you have less compatibility mode pain than I have. The following blog entry is worth a read by the way:</p><p><a href="https://blogs.msdn.com/b/ie/archive/2009/02/16/just-the-facts-recap-of-compatibility-view.aspx" target="_blank" rel="noopener noreferrer">https://blogs.msdn.com/b/ie/archive/2009/02/16/just-the-facts-recap-of-compatibility-view.aspx</a></p><p>Finally, I have an open question about compatibility mode. I <em>think</em> (but I don&#x27;t know) that even in compatibility mode IE runs using the same JavaScript engine. However I suspect it has a different DOM to play with. If anyone knows a little more about this and wants to let me know that&#x27;d be fantastic.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/css">css</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/intranet">intranet</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/meta">meta</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/internet-explorer">internet explorer</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/compatibility-mode">compatibility mode</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/header">header</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/page/205"><div class="pagination-nav__label">Â«<!-- --> <!-- -->Newer Entries</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/page/207"><div class="pagination-nav__label">Older Entries<!-- --> <!-- -->Â»</div></a></div></nav></main></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Support me</div><ul class="footer__items"><li class="footer__item"><a href="https://www.buymeacoffee.com/qUBm0Wh" target="_blank"><img src="https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png" alt="Buy Me A Coffee" style="height: 60px !important;width: 217px !important;"></a></li><li class="footer__item"><div style="display: flex; align-items: center;"><iframe src="https://github.com/sponsors/johnnyreilly/button" title="Sponsor johnnyreilly" height="35" width="116" style="border: 0;"></iframe><div>&nbsp;on GitHub</div></div></li></ul></div><div class="col footer__col"><div class="footer__title">Feeds</div><ul class="footer__items"><li class="footer__item"><a href="https://blog.johnnyreilly.com/rss.xml" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>RSS<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://blog.johnnyreilly.com/atom.xml" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Atom<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 John Reilly. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.80227799.js"></script>
<script src="/assets/js/main.14ca547e.js"></script>
</body>
</html>