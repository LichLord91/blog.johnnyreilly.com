<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="I CAN MAKE THIS WORK RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="I CAN MAKE THIS WORK Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-51754530-2","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=297675200"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","297675200",{})</script>
<link rel="icon" href="/img/favicon/profile.jpg">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="#3578e5">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/img/favicon/apple-touch-icon.png"><title data-react-helmet="true">A navigation animation (for your users delectation) | I CAN MAKE THIS WORK</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://blog.johnnyreilly.com/img/profile.jpg"><meta data-react-helmet="true" name="twitter:image" content="https://blog.johnnyreilly.com/img/profile.jpg"><meta data-react-helmet="true" property="og:url" content="https://blog.johnnyreilly.com/2013/04/26/a-navigation-animation-for-your-users"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><meta data-react-helmet="true" name="robots" content="max-image-preview:large"><meta data-react-helmet="true" property="og:title" content="A navigation animation (for your users delectation) | I CAN MAKE THIS WORK"><meta data-react-helmet="true" name="description" content="The Vexation"><meta data-react-helmet="true" property="og:description" content="The Vexation"><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="article:published_time" content="2013-04-26T00:00:00.000Z"><meta data-react-helmet="true" property="article:author" content="https://twitter.com/johnny_reilly"><meta data-react-helmet="true" property="article:tag" content="navigation animation,css load,UX,CSS animation,Modernizr"><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://blog.johnnyreilly.com/2013/04/26/a-navigation-animation-for-your-users"><link data-react-helmet="true" rel="alternate" href="https://blog.johnnyreilly.com/2013/04/26/a-navigation-animation-for-your-users" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://blog.johnnyreilly.com/2013/04/26/a-navigation-animation-for-your-users" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.85320736.css">
<link rel="preload" href="/assets/js/runtime~main.a83f38a5.js" as="script">
<link rel="preload" href="/assets/js/main.e22f0193.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">I CAN MAKE THIS WORK</b></a><a class="navbar__item navbar__link" href="/about">About</a><a class="navbar__item navbar__link" href="/archive">Blog Archive</a><a class="navbar__item navbar__link" href="/talks">Talks</a></div><div class="navbar__items navbar__items--right"><a href="https://polywork.johnnyreilly.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Polywork<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/johnnyreilly" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://twitter.com/johnny_reilly" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ðŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ðŸŒž</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_q+wC thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_9G5K margin-bottom--md">Recent posts</div><ul class="sidebarItemList_6T4b"><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/2021/12/29/preload-fonts-with-docusaurus">Preload fonts with Docusaurus</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/2021/12/28/azure-cli-show-query-output-properties">Query deployment outputs with the Azure CLI</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/2021/12/27/azure-container-apps-build-and-deploy-with-bicep-and-github-actions">Azure Container Apps: build and deploy with Bicep and GitHub Actions</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/2021/12/19/azure-container-apps-bicep-and-github-actions">Azure Container Apps, Bicep and GitHub Actions</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/2021/12/12/open-graph-sharing-previews-guide">Open Graph: a guide to sharable social media previews</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_d4p0" itemprop="headline">A navigation animation (for your users delectation)</h1><div class="blogPostData_-Im+ margin-vert--md"><time datetime="2013-04-26T00:00:00.000Z" itemprop="datePublished">April 26, 2013</time> Â· <!-- -->6 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_8c0z"><div class="avatar margin-bottom--sm"><a href="https://twitter.com/johnny_reilly" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_9q7L" src="https://blog.johnnyreilly.com/img/profile.jpg" alt="John Reilly"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://twitter.com/johnny_reilly" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">John Reilly</span></a></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_y2LR" id="the-vexation">The Vexation<a class="hash-link" href="#the-vexation" title="Direct link to heading">â€‹</a></h2><p>The current application I&#x27;m working on lives within an <code>iframe</code>. A side effect of that is that my users no longer get the visual feedback that they&#x27;re used to as they navigate around the site. By &quot;visual feedback&quot; what I mean are the little visual tics that are displayed in the browser when you&#x27;re in the process of navigating from one screen to the next. Basically, these:</p><p><img src="https://1.bp.blogspot.com/-x_8VXvW0w1M/UXpam8TtPQI/AAAAAAAAAbI/uVFFkL8uBAc/s320/TheSpinCycleOfProgress.png"></p><p>When an application is nested in an <code>iframe</code> it seems that these visual tics aren&#x27;t propogated up to the top frame of the browser as the user navigates around. Clicking on links results in a short lag whilst nothing appears to be happening and then, BANG!, a new page is rendered. This is not a great user experience. There&#x27;s nothing to indicate that the link has been clicked on and the browser is doing something. Well, not in Internet Explorer at least - Chrome (my browser of choice) appears to do just that. But that&#x27;s really by the by, the people using my app will be using the corporate browser, IE; so I need to think about them.</p><p>Now I&#x27;m fully aware that this is more in the region of nice-to-have rather than absolute necessity. That said, my experience is that when users think an application isn&#x27;t responding fast enough their action point is usually &quot;click it again, and maybe once more for luck&quot;. To prevent this from happening, I wanted to give the users back some kind of steer when they were in the process of navigation, <code>iframe</code> or no <code>iframe</code>.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="the-agreeable-resolution">The Agreeable Resolution<a class="hash-link" href="#the-agreeable-resolution" title="Direct link to heading">â€‹</a></h2><p>To that end, I&#x27;ve come up with something that I feel does the job, and does it well. I&#x27;ve taken a CSS animation courtesy of the good folk at <a href="http://cssload.net/" target="_blank" rel="noopener noreferrer">CSS Load</a> and embedded it in the layout of my application. This animation is hidden from view until the user navigates to another page. At that point, the CSS animation appears in the header of the screen and remains in place until the new screen is rendered. This is what it looks like:</p><p><img src="https://2.bp.blogspot.com/-RaGwl1llrDM/UX4pEiUfGWI/AAAAAAAAAbo/jSZC0skiLfQ/s320/NavigationAnimationAtWork.png"></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="hows-that-work-then-guv">How&#x27;s that work then guv?<a class="hash-link" href="#hows-that-work-then-guv" title="Direct link to heading">â€‹</a></h2><p>You&#x27;re no doubt dazzled by the glory of it all. How was it accomplished? Well, it was actually a great deal easier than you might think. First of all we have the html:</p><script src="https://gist.github.com/johnnyreilly/5466370.js?file=navigationAnimation.html"></script><p>Apart from the outer <code>div</code> tag (#navigationAnimation) all of this is the HTML taken from <a href="http://cssload.net/" target="_blank" rel="noopener noreferrer">CSS Load</a>. If you wanted to use a different navigation animation you could easily replace the inner HTML with something else instead. Next up is the CSS, again courtesy of CSS Load (and it&#x27;s this that turns this simple HTML into sumptuous animated goodness):</p><script src="https://gist.github.com/johnnyreilly/5466370.js?file=navigationAnimation.css"></script><p>And finally we have the JavaScript which is responsible for showing animation when the user starts navigating:</p><script src="https://gist.github.com/johnnyreilly/5466370.js?file=navigationAnimation.js"></script><p>It&#x27;s helped along with a little jQuery here but this could easily be accomplished with vanilla JS if you fancied. The approach works by hooking into the <a href="https://developer.mozilla.org/en-US/docs/DOM/Mozilla_event_reference/beforeunload" target="_blank" rel="noopener noreferrer">beforeunload</a> event that fires when &quot;<em>the window, the document and its resources are about to be unloaded</em>&quot;. There&#x27;s a little bit more to the functionality in the JavaScript abover which I go into in the PPS below. Essentially that covers backwards compatibility with earlier versions of IE.</p><p>I&#x27;ve coded this up in a manner that lends itself to re-use. I can imagine that you might also want to make use of the navigation animation if, for example, you had an expensive AJAX operation on a page and you didn&#x27;t want the users to despair. So the navigation animation could become a kind of a generic &quot;I am doing something&quot; animation instead - I leave it to your disgression.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="oh-and-a-final-ps">Oh, and a final PS<a class="hash-link" href="#oh-and-a-final-ps" title="Direct link to heading">â€‹</a></h2><p>I had initially planned to use an old school animated GIF instead of a CSS animation. The thing that stopped me taking this course of action is that, to quote an <a href="http://stackoverflow.com/a/780617/761388" target="_blank" rel="noopener noreferrer">answer on Stack Overflow</a> &quot;<em>IE assumes that the clicking of a link heralds a new navigation where the current page contents will be replaced. As part of the process for perparing for that it halts the code that animates the GIFs.</em>&quot;. So I needed animation that stayed animated. And lo, there were CSS animations...</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="better-make-that-a-pps---catering-for-ie-9-and-earlier">Better make that a PPS - catering for IE 9 and earlier<a class="hash-link" href="#better-make-that-a-pps---catering-for-ie-9-and-earlier" title="Direct link to heading">â€‹</a></h2><p>I spoke a touch too soon when I expounded on how CSS animations were going to get me out of a hole. Unfortunately, and to my lasting regret, they aren&#x27;t supported in IE 9. And yes, at least for now that is what the users have. To get round this I&#x27;ve delved a little bit further and discovered a frankly hacky way to make animated gifs stay animated after beforeunload has fired. It works by rendering an animated gif to the screen when beforeunload is fired. Why this works I couldn&#x27;t say - but if you&#x27;re interested to research more then take a look at <a href="http://stackoverflow.com/a/1904931/761388" target="_blank" rel="noopener noreferrer">this answer on Stack Overflow</a>. In my case I&#x27;ve found an animated gif on <a href="http://www.ajaxload.info/" target="_blank" rel="noopener noreferrer">AjaxLoad</a> which looks pretty similar to the CSS animation:</p><p><img src="https://4.bp.blogspot.com/-_9OgkLfflAg/UYEXn7dgByI/AAAAAAAAAb8/3Q33pAs6WeM/s320/navigationAnimation.gif" alt="null">This is now saved away as <code>navigationAnimation.gif</code> in the application. The JavaScript uses Modernizr to detect if CSS animations are in play. If they&#x27;re not then the animated gif is rendered to the screen in place of the CSS animation HTML. Ugly, but it seems to work well; I think this will work on IE 6 - 9. The CSS animations will work on IE 10+.</p></div><footer class="row docusaurus-mt-lg blogPostDetailsFull_xD8n"><div class="col"><b>Tags:</b><ul class="tags_NBRY padding--none margin-left--sm"><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/tags/navigation-animation">navigation animation</a></li><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/tags/css-load">css load</a></li><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/tags/ux">UX</a></li><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/tags/css-animation">CSS animation</a></li><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/tags/modernizr">Modernizr</a></li></ul></div><div class="col margin-top--sm"><a href="https://github.com/johnnyreilly/blog.johnnyreilly.com/edit/main/blog-website/blog/blog/2013-04-26-a-navigation-animation-for-your-users/index.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/2013/05/04/how-im-using-cassette"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Â« <!-- -->How I&#x27;m Using Cassette part 1:Getting Up and Running</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/2013/04/17/ie-10-install-torches-javascript"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">IE 10 Install Torches JavaScript Debugging in Visual Studio 2012 Through Auto Update (Probably)<!-- --> Â»</div></a></div></nav></main><div class="col col--2"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#the-vexation" class="table-of-contents__link toc-highlight">The Vexation</a></li><li><a href="#the-agreeable-resolution" class="table-of-contents__link toc-highlight">The Agreeable Resolution</a></li><li><a href="#hows-that-work-then-guv" class="table-of-contents__link toc-highlight">How&#39;s that work then guv?</a></li><li><a href="#oh-and-a-final-ps" class="table-of-contents__link toc-highlight">Oh, and a final PS</a></li><li><a href="#better-make-that-a-pps---catering-for-ie-9-and-earlier" class="table-of-contents__link toc-highlight">Better make that a PPS - catering for IE 9 and earlier</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Support me</div><ul class="footer__items"><li class="footer__item"><a href="https://www.buymeacoffee.com/qUBm0Wh" target="_blank"><img src="https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png" alt="Buy Me A Coffee" style="height: 60px !important;width: 217px !important;"></a></li><li class="footer__item"><div style="display: flex; align-items: center;"><iframe src="https://github.com/sponsors/johnnyreilly/button" title="Sponsor johnnyreilly" height="35" width="116" style="border: 0;"></iframe><div>&nbsp;on GitHub</div></div></li></ul></div><div class="col footer__col"><div class="footer__title">Feeds</div><ul class="footer__items"><li class="footer__item"><a href="https://blog.johnnyreilly.com/rss.xml" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>RSS<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://blog.johnnyreilly.com/atom.xml" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Atom<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 John Reilly. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.a83f38a5.js"></script>
<script src="/assets/js/main.e22f0193.js"></script>
</body>
</html>