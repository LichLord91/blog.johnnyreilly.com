<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="I CAN MAKE THIS WORK RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="I CAN MAKE THIS WORK Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-51754530-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="icon" href="/img/favicon/profile.jpg">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="rgb(37, 194, 160)">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/img/favicon/apple-touch-icon.png"><title data-react-helmet="true">XSD/XML Schema Generator + Xsd.exe:Taking the pain out of manual XML | I CAN MAKE THIS WORK</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://blog.johnnyreilly.com/img/profile.png"><meta data-react-helmet="true" name="twitter:image" content="https://blog.johnnyreilly.com/img/profile.png"><meta data-react-helmet="true" property="og:url" content="https://blog.johnnyreilly.com/2012/11/02/xsdxml-schema-generator-xsdexe-taking"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><meta data-react-helmet="true" name="robots" content="max-image-preview:large"><meta data-react-helmet="true" property="og:title" content="XSD/XML Schema Generator + Xsd.exe:Taking the pain out of manual XML | I CAN MAKE THIS WORK"><meta data-react-helmet="true" name="description" content="Is it 2003 again?!?"><meta data-react-helmet="true" property="og:description" content="Is it 2003 again?!?"><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="article:published_time" content="2012-11-02T00:00:00.000Z"><meta data-react-helmet="true" property="article:author" content="https://twitter.com/johnny_reilly"><meta data-react-helmet="true" property="article:tag" content="Xsd.exe,XSD/XML Schema Generator,LINQ to XML"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://blog.johnnyreilly.com/2012/11/02/xsdxml-schema-generator-xsdexe-taking"><link data-react-helmet="true" rel="alternate" href="https://blog.johnnyreilly.com/2012/11/02/xsdxml-schema-generator-xsdexe-taking" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://blog.johnnyreilly.com/2012/11/02/xsdxml-schema-generator-xsdexe-taking" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.ff16c2af.css">
<link rel="preload" href="/assets/js/runtime~main.8a602361.js" as="script">
<link rel="preload" href="/assets/js/main.6ad31ac0.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">I CAN MAKE THIS WORK</b></a><a class="navbar__item navbar__link" href="/about">About</a><a class="navbar__item navbar__link" href="/blog-archive">Blog Archive</a><a class="navbar__item navbar__link" href="/talks">Talks</a></div><div class="navbar__items navbar__items--right"><a href="https://polywork.johnnyreilly.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Polywork<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/johnnyreilly" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://twitter.com/johnny_reilly" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">ðŸŒœ</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">ðŸŒž</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_2ahu thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_2hhb margin-bottom--md">Recent posts</div><ul class="sidebarItemList_2xAf"><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/2021/12/19/azure-container-apps-bicep-and-github-actions">Azure Container Apps, Bicep and GitHub Actions</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/2021/12/12/open-graph-sharing-previews-guide">Open Graph: a guide to sharable social media previews</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/2021/12/05/azure-static-web-app-deploy-previews-with-azure-devops">Azure Static Web App Deploy Previews with Azure DevOps</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/2021/11/22/typescript-vs-jsdoc-javascript">TypeScript vs JSDoc JavaScript</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/2021/11/18/azure-standard-tests-with-bicep">Azure standard availability tests with Bicep</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_GeHD" itemprop="headline">XSD/XML Schema Generator + Xsd.exe:Taking the pain out of manual XML</h1><div class="blogPostData_291c margin-vert--md"><time datetime="2012-11-02T00:00:00.000Z" itemprop="datePublished">November 2, 2012</time> Â· <!-- -->6 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://twitter.com/johnny_reilly" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://blog.johnnyreilly.com/img/profile.jpg" alt="John Reilly"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://twitter.com/johnny_reilly" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">John Reilly</span></a></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_31ik" id="is-it-2003-again">Is it 2003 again?!?<a aria-hidden="true" class="hash-link" href="#is-it-2003-again" title="Direct link to heading">â€‹</a></h2><p>I&#x27;ve just discovered Xsd.exe. It&#x27;s not new. Or shiny. And in fact it&#x27;s been around since .NET 1.1. Truth be told, I&#x27;ve been aware of it for years but up until now I&#x27;ve not had need of it. But now now I&#x27;ve investigated it a bit I&#x27;ve found that it, combined with the XSD/XML Schema Generator can make for a nice tool to add to the utility belt.</p><p>Granted XML has long since stopped being sexy. But if you need it, as I did recently, then this is for you.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="to-the-xml-batman">To the XML Batman!<a aria-hidden="true" class="hash-link" href="#to-the-xml-batman" title="Direct link to heading">â€‹</a></h2><p>Now XML is nothing new to me (or I imagine anyone who&#x27;s been developing within the last 10 years). But most of the time when I use XML I&#x27;m barely aware that it&#x27;s going on - by and large it&#x27;s XML doing the heavy lifting underneath my web services. But the glory of this situation is, I never have to think about it. It just works. All I have to deal with are nice strongly typed objects which makes writing robust code a doddle.</p><p>I recently came upon a situation where I was working with XML in the raw; that is to say strings. I was going to be supplied with strings of XML which would represent various objects. It would be my job to take the supplied XML, extract out the data I needed and proceed accordingly.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="we-dont-need-no-validation">We Don&#x27;t Need No Validation...<a aria-hidden="true" class="hash-link" href="#we-dont-need-no-validation" title="Direct link to heading">â€‹</a></h2><p>I lied!</p><p>In order to write something reliable I needed to be able to validate that the supplied XML was as I expected. So, <a href="http://en.wikipedia.org/wiki/XML_Schema_(W3C)" target="_blank" rel="noopener noreferrer">XSD</a> time. If you&#x27;re familiar with XML then you&#x27;re probably equally familar with XSD which, to quote Wikipedia <em>&quot;can be used to express a set of rules to which an XML document must conform in order to be considered &#x27;valid&#x27;&quot;</em>.</p><p>Now I&#x27;ve written my fair share of XSDs over the years and I&#x27;ve generally found it a slightly tedious exercise. So I was delighted to discover an online tool to simplify the task. It&#x27;s called the <a href="http://www.freeformatter.com/xsd-generator.html" target="_blank" rel="noopener noreferrer">XSD/XML Schema Generator</a>. What this marvellous tool does is allow you to enter an example of your XML which it then uses to reverse engineer an XSD.</p><p>Here&#x27;s an example. I plugged in this:</p><script src="https://gist.github.com/4000326.js?file=contact.xml"></script><p>And pulled out this:</p><script src="https://gist.github.com/4000326.js?file=contact.xsd"></script><p>Fantastic! It doesn&#x27;t matter if the tool gets something slightly wrong; you can tweak the generated XSD to your hearts content. This is great because it does the hard work for you, allowing you to step back, mop your brow and then heartily approve the results. This tool is a labour saving device. Put simply, it&#x27;s a dishwasher.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="tools-of-the-trade">Tools of the Trade<a aria-hidden="true" class="hash-link" href="#tools-of-the-trade" title="Direct link to heading">â€‹</a></h2><p>How to get to the actual data? I was initially planning to break out the <a href="http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument(v=vs.100).aspx" target="_blank" rel="noopener noreferrer"><code>XDocument</code></a>, plug in my XSD and use the <code>Validate</code> method. Which would do the job just dandy.</p><p>However I resisted. As much as I like LINQ to XML I turned to use <a href="http://msdn.microsoft.com/en-us/library/x6c1kb0s(v=vs.100).aspx" target="_blank" rel="noopener noreferrer">Xsd.exe</a> instead. As I&#x27;ve mentioned, this tool is as old as the hills. But there&#x27;s gold in them thar hills, listen: <em>&quot;The XML Schema Definition (Xsd.exe) tool generates XML schema or common language runtime classes from XDR, XML, and XSD files, or from classes in a runtime assembly.&quot;</em></p><p>Excited? Thought not. But what this means is we can hurl our XSD at this tool and it will toss back a nicely formatted C# class for me to use. Good stuff! So how&#x27;s it done? Well MSDN is roughly as informative as it ever is (which is to say, not terribly) but fortunately there&#x27;s not a great deal to it. You fire up the Visual Studio Command Prompt (and I advise doing this in Administrator mode to escape permissions pain). Then you enter a command to generate your class. Here&#x27;s an example using the Contact.xsd file we generated earlier:</p><p><code>xsd.exe &quot;C:\\Contact.xsd&quot; /classes /out:&quot;C:\\&quot; /namespace:&quot;MyNameSpace&quot;</code>Generation looks like this:</p><p><img src="https://1.bp.blogspot.com/-TR-eaxshZo8/UJPclxs8JjI/AAAAAAAAAWg/TNKZuyi-8NU/s400/XsdInAction.png"></p><p>And you&#x27;re left with the lovely Contact.cs class:</p><script src="https://gist.github.com/4000326.js?file=Contact.cs"></script><h2 class="anchor anchorWithStickyNavbar_31ik" id="justify-your-actions">Justify Your Actions<a aria-hidden="true" class="hash-link" href="#justify-your-actions" title="Direct link to heading">â€‹</a></h2><p>But why is this good stuff? Indeed why is this more interesting than the newer, and hence obviously cooler, LINQ to XML? Well for my money it&#x27;s the following reasons that are important:</p><ol><li>Intellisense - I have always loved this. Call me lazy but I think intellisense frees up the mind to think about what problem you&#x27;re actually trying to solve. Xsd.exe&#x27;s generated classes give me that; I don&#x27;t need to hold the whole data structure in my head as I code.</li><li>Terse code - I&#x27;m passionate about less code. I think that a noble aim in software development is to write as little code as possible in order to achieve your aims. I say this as generally I have found that writing a minimal amount of code expresses the intention of the code in a far clearer fashion. In service of that aim Xsd.exe&#x27;s generated classes allow me to write less code than would be required with LINQ to XML.</li><li>To quote Scott Hanselman &quot;<a href="http://www.hanselman.com/blog/NuGetPackageOfTheWeek6DynamicMalleableEnjoyableExpandoObjectsWithClay.aspx" target="_blank" rel="noopener noreferrer">successful compilation is just the first unit test</a>&quot;. That it is but it&#x27;s a doozy. If I&#x27;m making changes to the code and I&#x27;ve been using LINQ to XML I&#x27;m not going to see the benefits of strong typing that I would with Xsd.exe&#x27;s generated classes. I like learning if I&#x27;ve broken the build sooner rather than later; strong typing gives me that safety net.</li></ol><h2 class="anchor anchorWithStickyNavbar_31ik" id="serialization--deserialization-helper">Serialization / Deserialization Helper<a aria-hidden="true" class="hash-link" href="#serialization--deserialization-helper" title="Direct link to heading">â€‹</a></h2><p>As you read this you&#x27;re no doubt thinking &quot;but wait he&#x27;s shown us how to create XSDs from XML and classes from XSDs but how do we take XML and turn it into objects? And how do we turn those objects back into XML?&quot;</p><p>See how I read your mind just there? It&#x27;s a gift. Well, I&#x27;ve written a little static helper class for the very purpose:</p><script src="https://gist.github.com/4000326.js?file=XmlConverter.cs"></script><p>And here&#x27;s an example of how to use it:</p><script src="https://gist.github.com/4000326.js?file=XmlConverterUsage.cs"></script><p>I was tempted to name my methods in tribute to Crockford&#x27;s JSON (namely <code>ToXML</code> becoming <code>stringify</code> and <code>ToObject</code> becoming <code>parse</code>). Maybe later.</p><p>And that&#x27;s us done. Whilst it&#x27;s no doubt unfashionable I think that this is a very useful approach indeed and I commend it to the interweb!</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="update---using-xsdexe-to-generate-xsd-from-xml">Update - using Xsd.exe to generate XSD from XML<a aria-hidden="true" class="hash-link" href="#update---using-xsdexe-to-generate-xsd-from-xml" title="Direct link to heading">â€‹</a></h2><p>I was chatting to a friend about this blog post and he mentioned that you can actually use Xsd.exe to generate XSD files from XML as well. He&#x27;s quite right - this feature does exist. To go back to our example from earlier we can execute the following command:</p><p><code>xsd.exe &quot;C:\\Contact.xml&quot; /out:&quot;C:\\&quot; </code>And this will generate the following file:</p><script src="https://gist.github.com/4000326.js?file=Generated by XSD contact.xsd"></script><p>However, the XSD generated above is very much a &quot;Microsoft XSD&quot;; it&#x27;s an XSD which features MS properties and so on. It&#x27;s fine but I think that generally I prefer my XSDs to be as vanilla as possible. To that end I&#x27;m likely to stick to using the XSD/XML Schema Generator as it doesn&#x27;t appear to be possible to get Xsd.exe to generate &quot;vanilla XSD&quot;.</p><p>Thanks to Ajay for bringing it to my attention though.</p></div><footer class="row docusaurus-mt-lg blogPostDetailsFull_3kfx"><div class="col"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/xsd-exe">Xsd.exe</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/xsd-xml-schema-generator">XSD/XML Schema Generator</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/linq-to-xml">LINQ to XML</a></li></ul></div><div class="col margin-top--sm"><a href="https://github.com/johnnyreilly/blog.johnnyreilly.com/edit/main/blog-website/blog/blog/2012-11-02-xsdxml-schema-generator-xsdexe-taking/index.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/2012/11/13/a-nicer-net-api-for-bloombergs-open-api"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Â« <!-- -->Getting up to speed with Bloomberg&#x27;s Open API...</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/2012/10/22/mvc-3-meet-dictionary"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">MVC 3 meet Dictionary<!-- --> Â»</div></a></div></nav></main><div class="col col--2"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#is-it-2003-again" class="table-of-contents__link toc-highlight">Is it 2003 again?!?</a></li><li><a href="#to-the-xml-batman" class="table-of-contents__link toc-highlight">To the XML Batman!</a></li><li><a href="#we-dont-need-no-validation" class="table-of-contents__link toc-highlight">We Don&#39;t Need No Validation...</a></li><li><a href="#tools-of-the-trade" class="table-of-contents__link toc-highlight">Tools of the Trade</a></li><li><a href="#justify-your-actions" class="table-of-contents__link toc-highlight">Justify Your Actions</a></li><li><a href="#serialization--deserialization-helper" class="table-of-contents__link toc-highlight">Serialization / Deserialization Helper</a></li><li><a href="#update---using-xsdexe-to-generate-xsd-from-xml" class="table-of-contents__link toc-highlight">Update - using Xsd.exe to generate XSD from XML</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Support me</div><ul class="footer__items"><li class="footer__item"><a href="https://www.buymeacoffee.com/qUBm0Wh" target="_blank"><img src="https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png" alt="Buy Me A Coffee" style="height: 60px !important;width: 217px !important;"></a></li><li class="footer__item"><div style="display: flex; align-items: center;"><iframe src="https://github.com/sponsors/johnnyreilly/button" title="Sponsor johnnyreilly" height="35" width="116" style="border: 0;"></iframe><div>&nbsp;on GitHub</div></div></li></ul></div><div class="col footer__col"><div class="footer__title">Feeds</div><ul class="footer__items"><li class="footer__item"><a href="https://blog.johnnyreilly.com/rss.xml" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>RSS<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://blog.johnnyreilly.com/atom.xml" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Atom<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 John Reilly. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.8a602361.js"></script>
<script src="/assets/js/main.6ad31ac0.js"></script>
</body>
</html>