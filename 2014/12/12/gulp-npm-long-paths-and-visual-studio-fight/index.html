<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="I CAN MAKE THIS WORK RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="I CAN MAKE THIS WORK Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-51754530-2","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=297675200"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","297675200",{})</script>
<link rel="icon" href="/img/favicon/profile.jpg">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="#3578e5">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/img/favicon/apple-touch-icon.png"><title data-react-helmet="true">Gulp, npm, long paths and Visual Studio.... Fight! | I CAN MAKE THIS WORK</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://blog.johnnyreilly.com/img/profile.jpg"><meta data-react-helmet="true" name="twitter:image" content="https://blog.johnnyreilly.com/img/profile.jpg"><meta data-react-helmet="true" property="og:url" content="https://blog.johnnyreilly.com/2014/12/12/gulp-npm-long-paths-and-visual-studio-fight"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><meta data-react-helmet="true" name="robots" content="max-image-preview:large"><meta data-react-helmet="true" property="og:title" content="Gulp, npm, long paths and Visual Studio.... Fight! | I CAN MAKE THIS WORK"><meta data-react-helmet="true" name="description" content="How I managed to gulp-angular-templatecache working inside Visual Studio"><meta data-react-helmet="true" property="og:description" content="How I managed to gulp-angular-templatecache working inside Visual Studio"><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="article:published_time" content="2014-12-12T00:00:00.000Z"><meta data-react-helmet="true" property="article:author" content="https://twitter.com/johnny_reilly"><meta data-react-helmet="true" property="article:tag" content="npm,Visual Studio,long paths,gulp-angular-templatecache"><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://blog.johnnyreilly.com/2014/12/12/gulp-npm-long-paths-and-visual-studio-fight"><link data-react-helmet="true" rel="alternate" href="https://blog.johnnyreilly.com/2014/12/12/gulp-npm-long-paths-and-visual-studio-fight" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://blog.johnnyreilly.com/2014/12/12/gulp-npm-long-paths-and-visual-studio-fight" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.85320736.css">
<link rel="preload" href="/assets/js/runtime~main.2c8efce8.js" as="script">
<link rel="preload" href="/assets/js/main.c1b2d702.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">I CAN MAKE THIS WORK</b></a><a class="navbar__item navbar__link" href="/about">About</a><a class="navbar__item navbar__link" href="/archive">Blog Archive</a><a class="navbar__item navbar__link" href="/talks">Talks</a></div><div class="navbar__items navbar__items--right"><a href="https://polywork.johnnyreilly.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Polywork<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/johnnyreilly" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://twitter.com/johnny_reilly" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ðŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ðŸŒž</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_q+wC thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_9G5K margin-bottom--md">Recent posts</div><ul class="sidebarItemList_6T4b"><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/2021/12/29/preload-fonts-with-docusaurus">Preload fonts with Docusaurus</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/2021/12/28/azure-cli-show-query-output-properties">Query deployment outputs with the Azure CLI</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/2021/12/27/azure-container-apps-build-and-deploy-with-bicep-and-github-actions">Azure Container Apps: build and deploy with Bicep and GitHub Actions</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/2021/12/19/azure-container-apps-bicep-and-github-actions">Azure Container Apps, Bicep and GitHub Actions</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/2021/12/12/open-graph-sharing-previews-guide">Open Graph: a guide to sharable social media previews</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_d4p0" itemprop="headline">Gulp, npm, long paths and Visual Studio.... Fight!</h1><div class="blogPostData_-Im+ margin-vert--md"><time datetime="2014-12-12T00:00:00.000Z" itemprop="datePublished">December 12, 2014</time> Â· <!-- -->3 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_8c0z"><div class="avatar margin-bottom--sm"><a href="https://twitter.com/johnny_reilly" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_9q7L" src="https://blog.johnnyreilly.com/img/profile.jpg" alt="John Reilly"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://twitter.com/johnny_reilly" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">John Reilly</span></a></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_y2LR" id="how-i-managed-to-gulp-angular-templatecache-working-inside-visual-studio"><sub>How I managed to gulp-angular-templatecache working inside Visual Studio</sub><a class="hash-link" href="#how-i-managed-to-gulp-angular-templatecache-working-inside-visual-studio" title="Direct link to heading">â€‹</a></h2><p>Every now and then something bites you unexpectedly. After a certain amount of pain, the answer comes to you and you know you want to save others from falling into the same deathtrap.</p><p>There I was minding my own business and having a play with a Gulp plugin called <a href="https://www.npmjs.com/package/gulp-angular-templatecache" target="_blank" rel="noopener noreferrer">gulp-angular-templatecache</a>. If you&#x27;re not aware of it, it &quot;Concatenates and registers AngularJS templates in the $templateCache&quot;. I was planning to use it so that all the views in an <a href="https://github.com/johnnyreilly/proverb-offline" target="_blank" rel="noopener noreferrer">Angular app of mine</a> were loaded up-front rather than on demand. (It&#x27;s a first step in making an &quot;offline-first&quot; version of that particular app.)</p><p>I digress already. No sooner had I tapped in:</p><div class="codeBlockContainer_J+bg language-ps theme-code-block"><div class="codeBlockContent_csEI ps"><pre tabindex="0" class="prism-code language-ps codeBlock_rtdJ thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#d6deeb"><span class="token plain">npm install gulp-angular-templatecache --saveDev</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Then I noticed my Visual Studio project was no longer compiling. It was dying a death on build with this error:</p><div class="codeBlockContainer_J+bg language-ps theme-code-block"><div class="codeBlockContent_csEI ps"><pre tabindex="0" class="prism-code language-ps codeBlock_rtdJ thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#d6deeb"><span class="token plain">ASPNETCOMPILER : error ASPRUNTIME: The specified path, file name, or both are too long. The fully qualified file name must be less than 260 characters, and the directory name must be less than 248 characters.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>I was dimly aware that there were issues with the nested <a href="https://github.com/joyent/node/issues/6960" target="_blank" rel="noopener noreferrer">node_modules</a> leading to Windows-killing paths. This sounded just like that.... And it was! <code>gulp-angular-templatecache</code> had a dependency on <code>gulp-footer</code> which had a dependency on <code>lodash.assign</code> which had a dependency on <code>lodash._basecreatecallback</code> which had.... You see where I&#x27;m going? It seems that the lovely lodash has created the path from hell.</p><p>For reasons that aren&#x27;t particularly clear this kills Visual Studio&#x27;s build process. This is slightly surprising given that our rogue path is sat in the <code>node_modules</code> directory which isn&#x27;t part of the project in Visual Studio. That being the case you&#x27;d imagine that you could do what you liked there. But no, it seems VS is a delicate flower and we must be careful not to offend. Strange.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="its-workaround-time">It&#x27;s Workaround Time!<a class="hash-link" href="#its-workaround-time" title="Direct link to heading">â€‹</a></h2><p>After a <em>great deal</em> of digging I found the answer nestled in the middle of an <a href="http://stackoverflow.com/a/24144479/761388" target="_blank" rel="noopener noreferrer">answer on Stack Overflow</a>. To quote:</p><blockquote><p>If you will add &quot;lodash.bind&quot; module to your project&#x27;s package.json as dependency it will be installed in one level with gulp and not as gulp&#x27;s dependency</p></blockquote><p>That&#x27;s right, I just needed to tap enter this at the root of my project:</p><div class="codeBlockContainer_J+bg language-ps theme-code-block"><div class="codeBlockContent_csEI ps"><pre tabindex="0" class="prism-code language-ps codeBlock_rtdJ thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#d6deeb"><span class="token plain">npm install lodash.bind --saveDev</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>And all was sweetness and light once more - no more complaints from VS.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="the-future">The Future<a class="hash-link" href="#the-future" title="Direct link to heading">â€‹</a></h2><p>It looks like lodash are <a href="https://github.com/lodash/lodash-cli/issues/23" target="_blank" rel="noopener noreferrer">on course to address this issue</a>. So one day this this workaround won&#x27;t be necessary anymore which is good.</p><p>However, the general long path issue concerning node / npm hasn&#x27;t vanished for Windows users. Given VS 2015 is planning to make Gulp and Grunt 1st class citizens of Visual Studio I&#x27;m going to guess that sort of issue is likely to arise again and again for other packages. I&#x27;m hoping that means that someone will actually fix the underlying path issues that upset Windows with npm.</p><p>It sounds like npm are planning to take <a href="https://github.com/joyent/node/issues/6960#issuecomment-46704998" target="_blank" rel="noopener noreferrer">some steps</a> which is great. But I can&#x27;t be alone in having a slightly nagging feeling that Windows isn&#x27;t quite a first class citizen for node / io / npm yet. I really hope it will become one.</p></div><footer class="row docusaurus-mt-lg blogPostDetailsFull_xD8n"><div class="col"><b>Tags:</b><ul class="tags_NBRY padding--none margin-left--sm"><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/tags/npm">npm</a></li><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/tags/visual-studio">Visual Studio</a></li><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/tags/long-paths">long paths</a></li><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/tags/gulp-angular-templatecache">gulp-angular-templatecache</a></li></ul></div><div class="col margin-top--sm"><a href="https://github.com/johnnyreilly/blog.johnnyreilly.com/edit/main/blog-website/blog/blog/2014-12-12-gulp-npm-long-paths-and-visual-studio-fight/index.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/2014/12/29/deploying-aspnet-mvc-to-github-pages-with-appveyor-part-1"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Â« <!-- -->Deploying from ASP.Net MVC to GitHub Pages using AppVeyor part 1</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/2014/12/05/whats-in-a-name"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">What&#x27;s in a (Domain) Name?<!-- --> Â»</div></a></div></nav></main><div class="col col--2"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#how-i-managed-to-gulp-angular-templatecache-working-inside-visual-studio" class="table-of-contents__link toc-highlight"><sub>How I managed to gulp-angular-templatecache working inside Visual Studio</sub></a></li><li><a href="#its-workaround-time" class="table-of-contents__link toc-highlight">It&#39;s Workaround Time!</a></li><li><a href="#the-future" class="table-of-contents__link toc-highlight">The Future</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Support me</div><ul class="footer__items"><li class="footer__item"><a href="https://www.buymeacoffee.com/qUBm0Wh" target="_blank"><img src="https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png" alt="Buy Me A Coffee" style="height: 60px !important;width: 217px !important;"></a></li><li class="footer__item"><div style="display: flex; align-items: center;"><iframe src="https://github.com/sponsors/johnnyreilly/button" title="Sponsor johnnyreilly" height="35" width="116" style="border: 0;"></iframe><div>&nbsp;on GitHub</div></div></li></ul></div><div class="col footer__col"><div class="footer__title">Feeds</div><ul class="footer__items"><li class="footer__item"><a href="https://blog.johnnyreilly.com/rss.xml" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>RSS<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://blog.johnnyreilly.com/atom.xml" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Atom<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 John Reilly. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.2c8efce8.js"></script>
<script src="/assets/js/main.c1b2d702.js"></script>
</body>
</html>