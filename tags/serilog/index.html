<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-tags-post-list-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="I CAN MAKE THIS WORK RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="I CAN MAKE THIS WORK Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-51754530-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-226F0LR9KE"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-226F0LR9KE",{anonymize_ip:!0})</script>
<link rel="search" type="application/opensearchdescription+xml" title="I CAN MAKE THIS WORK" href="/opensearch.xml">
<link rel="icon" href="/img/favicon/profile.jpg">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="#3578e5">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/img/favicon/apple-touch-icon.png"><title data-rh="true">One post tagged with &quot;Serilog&quot; | I CAN MAKE THIS WORK</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://blog.johnnyreilly.com/img/profile.jpg"><meta data-rh="true" name="twitter:image" content="https://blog.johnnyreilly.com/img/profile.jpg"><meta data-rh="true" property="og:url" content="https://blog.johnnyreilly.com/tags/serilog"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="robots" content="max-image-preview:large"><meta data-rh="true" property="og:title" content="One post tagged with &quot;Serilog&quot; | I CAN MAKE THIS WORK"><meta data-rh="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://blog.johnnyreilly.com/tags/serilog"><link data-rh="true" rel="alternate" href="https://blog.johnnyreilly.com/tags/serilog" hreflang="en"><link data-rh="true" rel="alternate" href="https://blog.johnnyreilly.com/tags/serilog" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://J3MYR1INLT-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.ccaeaa27.css">
<link rel="preload" href="/assets/js/runtime~main.0f17538c.js" as="script">
<link rel="preload" href="/assets/js/main.aed8d9bc.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">I CAN MAKE THIS WORK</b></a><a class="navbar__item navbar__link" href="/about">About</a><a class="navbar__item navbar__link" href="/archive">Blog Archive</a><a class="navbar__item navbar__link" href="/talks">Talks</a></div><div class="navbar__items navbar__items--right"><a href="https://polywork.johnnyreilly.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Polywork<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/johnnyreilly" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://twitter.com/johnny_reilly" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_qEbK"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_a9qW thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_uKok margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Kvuv"><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/2022/04/16/type-annotations-strong-types-weakly-held">Type annotations: strong types, weakly held</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/2022/04/06/eslint-your-csharp-in-vs-code-with-roslyn-analyzers">ESLint your C# in VS Code with Roslyn Analyzers</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/2022/03/30/azure-devops-consume-private-nuget-artifact-feed">Azure DevOps: consume a private artifact feed</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/2022/03/20/lighthouse-meet-github-actions">Lighthouse meet GitHub Actions</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/2022/03/06/swashbuckle-inheritance-multiple-return-types">Swashbuckle &amp; inheritance: Give. Me. The. Types</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><header class="margin-bottom--xl"><h1>One post tagged with &quot;Serilog&quot;</h1><a href="/tags">View All Tags</a></header><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/2021/01/30/aspnet-serilog-and-application-insights">ASP.NET, Serilog and Application Insights</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2021-01-30T00:00:00.000Z" itemprop="datePublished">January 30, 2021</time> · <!-- -->4 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><span class="avatar__photo-link avatar__photo"><a href="https://twitter.com/johnny_reilly" target="_blank" rel="noopener noreferrer"><img class="image_o0gy" src="https://blog.johnnyreilly.com/img/profile.jpg" alt="John Reilly"></a></span><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://twitter.com/johnny_reilly" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">John Reilly</span></a></div></div></div></div></div></header><meta itemprop="image" content="https://blog.johnnyreilly.com/assets/images/application-insights-properties-72237e21926a47f0f2bc04aee0237843.png"><div class="markdown" itemprop="articleBody"><p>If you&#x27;re deploying an ASP.NET application to Azure App Services, there&#x27;s a decent chance you&#x27;ll also be using the fantastic <a href="https://serilog.net/" target="_blank" rel="noopener noreferrer">Serilog</a> and will want to plug it into Azure&#x27;s <a href="https://docs.microsoft.com/en-us/azure/azure-monitor/app/app-insights-overview" target="_blank" rel="noopener noreferrer">Application Insights</a>.</p><p>This post will show you how it&#x27;s done, and it&#x27;ll also build upon the <a href="/2021/01/29/surfacing-azure-pipelines-build-info-in-an-aspnet-react-app">build info work from our previous post</a>. In what way? Great question. Well logs are a tremendous diagnostic tool. If you have logs which display some curious behaviour, and you&#x27;d like to replicate that in another environment, you really want to take exactly that version of the codebase out to play. Our last post introduced build info into our application in the form of our <code>AppVersionInfo</code> class that looks something like this:</p><div class="codeBlockContainer_I0IT language-json theme-code-block"><div class="codeBlockContent_wNvx" style="color:#d6deeb;background-color:#011627"><pre tabindex="0" class="prism-code language-json codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#d6deeb"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;buildNumber&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;20210130.1&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;buildId&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;123456&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;branchName&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;main&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;commitHash&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;7089620222c30c1ad88e4b556c0a7908ddd34a8e&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>We&#x27;d initially exposed an endpoint in our application which surfaced up this information. Now we&#x27;re going to take that self same information and bake it into our log messages by making use of <a href="https://github.com/serilog/serilog/wiki/Enrichment" target="_blank" rel="noopener noreferrer">Serilog&#x27;s enrichment functionality</a>. Build info and Serilog&#x27;s enrichment are the double act your logging has been waiting for.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="lets-plug-it-together">Let&#x27;s plug it together<a class="hash-link" href="#lets-plug-it-together" title="Direct link to heading">​</a></h2><p>We&#x27;re going to need a number of Serilog dependencies added to our <code>.csproj</code>:</p><div class="codeBlockContainer_I0IT language-xml theme-code-block"><div class="codeBlockContent_wNvx" style="color:#d6deeb;background-color:#011627"><pre tabindex="0" class="prism-code language-xml codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#d6deeb"><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">PackageReference</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">Include</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(127, 219, 202)">Serilog.AspNetCore</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">Version</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(127, 219, 202)">3.4.0</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">PackageReference</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">Include</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(127, 219, 202)">Serilog.Enrichers.Environment</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">Version</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(127, 219, 202)">2.1.3</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">PackageReference</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">Include</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(127, 219, 202)">Serilog.Enrichers.Thread</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">Version</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(127, 219, 202)">3.1.0</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">PackageReference</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">Include</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(127, 219, 202)">Serilog.Sinks.ApplicationInsights</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">Version</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(127, 219, 202)">3.1.0</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">PackageReference</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">Include</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(127, 219, 202)">Serilog.Sinks.Async</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">Version</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(127, 219, 202)">1.4.0</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">/&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>The earlier in your application lifetime you get logging wired up, the happier you will be. Earlier, means more information when you&#x27;re diagnosing issues. So we want to start in our <code>Program.cs</code>; <code>Startup.cs</code> would be just <em>way</em> too late.</p><div class="codeBlockContainer_I0IT language-cs theme-code-block"><div class="codeBlockContent_wNvx" style="color:#d6deeb;background-color:#011627"><pre tabindex="0" class="prism-code language-cs codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#d6deeb"><span class="token keyword" style="color:rgb(127, 219, 202)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">Program</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> </span><span class="token class-name keyword" style="color:rgb(127, 219, 202)">string</span><span class="token plain"> APP_NAME </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;MyAmazingApp&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">static</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:rgb(127, 219, 202)">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">Main</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name keyword" style="color:rgb(127, 219, 202)">string</span><span class="token class-name punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token class-name punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        AppVersionInfo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">InitialiseBuildInfoGivenPath</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">Directory</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">GetCurrentDirectory</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        LoggerConfigurationExtensions</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">SetupLoggerConfiguration</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">APP_NAME</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> AppVersionInfo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">GetBuildInfo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token keyword" style="color:rgb(127, 219, 202)">try</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">            Log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Information</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&quot;Starting web host&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token function" style="color:rgb(130, 170, 255)">CreateHostBuilder</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Build</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Run</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token keyword" style="color:rgb(127, 219, 202)">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 139)">Exception</span><span class="token plain"> ex</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">            Log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Fatal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">ex</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;Host terminated unexpectedly&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token keyword" style="color:rgb(127, 219, 202)">finally</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">            Log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">CloseAndFlush</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">static</span><span class="token plain"> </span><span class="token return-type class-name" style="color:rgb(255, 203, 139)">IHostBuilder</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">CreateHostBuilder</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name keyword" style="color:rgb(127, 219, 202)">string</span><span class="token class-name punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token class-name punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        Host</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">CreateDefaultBuilder</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">UseSerilog</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">hostBuilderContext</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> services</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> loggerConfiguration</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">                loggerConfiguration</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">ConfigureBaseLogging</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">APP_NAME</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> AppVersionInfo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">GetBuildInfo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">                loggerConfiguration</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">AddApplicationInsightsLogging</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">services</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> hostBuilderContext</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Configuration</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">ConfigureWebHostDefaults</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">webBuilder </span><span class="token operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">                webBuilder</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">                    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token generic-method function" style="color:rgb(130, 170, 255)">UseStartup</span><span class="token generic-method generic class-name punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token generic-method generic class-name" style="color:rgb(255, 203, 139)">Startup</span><span class="token generic-method generic class-name punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>If you look at the code above you&#x27;ll see that the first line of code that executes is <code>AppVersionInfo.InitialiseBuildInfoGivenPath</code>. This initialises our <code>AppVersionInfo</code> so we have meaningful build info to pump into our logs. The next thing we do is to configure Serilog with <code>LoggerConfigurationExtensions.SetupLoggerConfiguration</code>. This provides us with a configured logger so we are free to log any issues that take place during startup. (Incidentally, after startup you&#x27;ll likely inject an <code>ILogger</code> into your classes rather than using the static <code>Log</code> directly.)</p><p>Finally, we call <code>CreateHostBuilder</code> which in turn calls <code>UseSerilog</code> to plug Serilog into ASP.NET. If you take a look inside the body of <code>UseSerilog</code> you&#x27;ll see we configure the logging of ASP.NET (in the same way we did for Serilog) and we hook into Application Insights as well. There&#x27;s been a number of references to <code>LoggerConfigurationExtensions</code>. Let&#x27;s take a look at it:</p><div class="codeBlockContainer_I0IT language-cs theme-code-block"><div class="codeBlockContent_wNvx" style="color:#d6deeb;background-color:#011627"><pre tabindex="0" class="prism-code language-cs codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#d6deeb"><span class="token keyword" style="color:rgb(127, 219, 202)">internal</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">static</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">LoggerConfigurationExtensions</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">internal</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">static</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:rgb(127, 219, 202)">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">SetupLoggerConfiguration</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name keyword" style="color:rgb(127, 219, 202)">string</span><span class="token plain"> appName</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">BuildInfo</span><span class="token plain"> buildInfo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        Log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Logger </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name" style="color:rgb(255, 203, 139)">LoggerConfiguration</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">ConfigureBaseLogging</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">appName</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> buildInfo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">CreateLogger</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">internal</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">static</span><span class="token plain"> </span><span class="token return-type class-name" style="color:rgb(255, 203, 139)">LoggerConfiguration</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">ConfigureBaseLogging</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token keyword" style="color:rgb(127, 219, 202)">this</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">LoggerConfiguration</span><span class="token plain"> loggerConfiguration</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token class-name keyword" style="color:rgb(127, 219, 202)">string</span><span class="token plain"> appName</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token class-name" style="color:rgb(255, 203, 139)">BuildInfo</span><span class="token plain"> buildInfo</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        loggerConfiguration</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">MinimumLevel</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Debug</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">MinimumLevel</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Override</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&quot;Microsoft&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> LogEventLevel</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Information</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// AMAZING COLOURS IN THE CONSOLE!!!!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">WriteTo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Async</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">a </span><span class="token operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token plain"> a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token named-parameter punctuation" style="color:rgb(199, 146, 234)">theme</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> AnsiConsoleTheme</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Code</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Enrich</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">FromLogContext</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Enrich</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">WithMachineName</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Enrich</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">WithThreadId</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// Build information as custom properties</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Enrich</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">WithProperty</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">nameof</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">buildInfo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">BuildId</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> buildInfo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">BuildId</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Enrich</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">WithProperty</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">nameof</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">buildInfo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">BuildNumber</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> buildInfo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">BuildNumber</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Enrich</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">WithProperty</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">nameof</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">buildInfo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">BranchName</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> buildInfo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">BranchName</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Enrich</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">WithProperty</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">nameof</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">buildInfo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">CommitHash</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> buildInfo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">CommitHash</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Enrich</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">WithProperty</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&quot;ApplicationName&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> appName</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> loggerConfiguration</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">internal</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">static</span><span class="token plain"> </span><span class="token return-type class-name" style="color:rgb(255, 203, 139)">LoggerConfiguration</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">AddApplicationInsightsLogging</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">this</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">LoggerConfiguration</span><span class="token plain"> loggerConfiguration</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">IServiceProvider</span><span class="token plain"> services</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">IConfiguration</span><span class="token plain"> configuration</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(127, 219, 202)">!</span><span class="token keyword" style="color:rgb(127, 219, 202)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">IsNullOrWhiteSpace</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">configuration</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token generic-method function" style="color:rgb(130, 170, 255)">GetValue</span><span class="token generic-method generic class-name punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token generic-method generic class-name keyword" style="color:rgb(127, 219, 202)">string</span><span class="token generic-method generic class-name punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&quot;APPINSIGHTS_INSTRUMENTATIONKEY&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">            loggerConfiguration</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">WriteTo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">ApplicationInsights</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">                services</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token generic-method function" style="color:rgb(130, 170, 255)">GetRequiredService</span><span class="token generic-method generic class-name punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token generic-method generic class-name" style="color:rgb(255, 203, 139)">TelemetryConfiguration</span><span class="token generic-method generic class-name punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">                TelemetryConverter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Traces</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> loggerConfiguration</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>If we take a look at the <code>ConfigureBaseLogging</code> method above, we can see that our logs are being enriched with the build info, property by property. We&#x27;re also giving ourselves a beautifully coloured console thanks to Serilog&#x27;s glorious <a href="https://github.com/serilog/serilog-sinks-console#themes" target="_blank" rel="noopener noreferrer">theme support</a>:</p><p><img loading="lazy" alt="screenshot of the console featuring coloured output" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA5wAAACACAMAAABQkJaeAAABVlBMVEUeHh7a2tr/q3/l5eWUlJTZ2dksLCz/qX3IyMgiISHU1NTExMRYWFh/f3/R0dGurq5DQ0PNzc1tbW0jIyMoKCjKysqMjIz/pXpRUVEmJiY2NjZ1dXU8PDwtJySSkpKFhYWOjo6BgYG3t7dISEg5OTm7u7vW1tbCwsJdXV2IiIhLS0snIyG9vb0wMDBpaWmysrK1tbVgYGCbm5tbQTaFWkjvmXKoqKhaWlozMzNHNi5VVVV8fHyRkZFmZma/v79FRUVCNCxycnLmlG54eHinblVAQECQkJDznHTBwcHNhWTgkG39oXnql3G7e11vTj/tmHLDf2FVPzQ7LynTiWdNOTE1KyaWZE6MX0uioqJvb29iYmKjo6OYmJj5oHawdVl7VUNiRTnIgmJcXFybZ1FOTk7ajWpfRDiBWEWQYUxnSTytra2ha1N0UUHi4uI4LSi5ublRPDNQOzN66flDAAAavUlEQVR42uyd+1cTRxTH7x0nu9kkBJJAXoSE2IAk4RGgAvIWFATUClgftEhVqq3V1v7/v/TObJbpZtYsAUvlZD/nmOw3d+Yyx8PH2WQXhICAb5XKylLPdAG+BQ4+H0BAQEBAQEBAQEBAQEBAQEBAQEBAQECAi/mkxIDrw1hSkoKvx1pJYgEoYsU+uAyqyxXx/vk6fD1OTiyvNPtYMgTteWcPsyDgEgygJAvXhwRKvgMPUk1lrZQFHVBCST8oaoijcBlUlyvCZN/DV2OWmXWvdJtJ9qE9x0xyBwIuJefkGmGHfLKU3nQ8td70DFeTBfDCmN8crt5t1lKDTZLghZUdPALfnqUbZ8QB5ujpAwCEb9z4RE83VdEAKKwRCU85s4gNEIzgVEcOzc3Njbjl3EQna9y8RQV/VJcrQZfzcKOupfPymu3oScr5+A4BPhyIQdvectZ3mjyy8+dH25lDWnqb1KUMYB84fFfkgk1L+pfmkjegUytySUymCd5kGXSmSzR2GIj2PdPKv1Hbxk85gDg9U/GWS05J+EtyYp+SsyPG3BoZDyLD4E0IDfBHdbkadDlNNuSd/KmbbFZPUs51OC8/eMu5zpqYMn40ZTi02qQuPT1WcgrJegrGGOeTIpX4Vi21kOQ8C62ccr5UMwpLnN8XsUKWSrKgQzoqOVVPXzmJ4YvJ2bicnP6kEL/Jt+itclqMDXknf96zPS19LTn3GXsmkcu9w9jG7MFbxh61TV2JkhPu8qpFT4u8mAIocF4BYvLMrNT8YAEk1mbMds3WuI9vgUKNlOT6+6edFnpPRaVcLiPJx8vlZFNOdMn5oixJ+cqJay45+xZTl5ezvxZTPuZb5JwYq+VAkZuvgI5ey2WzHivTVq3NM4Yb81+Wsz77p5P/VDqqpFjft8Bh6O3OrKv4kN3TkpJTm6eSJqdee8wyoHjCtsU6fmNmvW3qRpScVpGfyudlvgjwhldt0Yq8aUGSc55zn7LaY055GhT6yJjtotZTQ6goV0NyCqb/LWcMbHzkjETxLyWnMRVCxMSkaB6qirVMF+RxezlDNuPNOB1GIvJBCDIcGaWWsjwAglIEKc/JqZGQIcdG5t1d9BrkG0iI+gi4UavW5knmKEx4y3nyy0PGWEZY8CyTMRkzBbdbE2TMH19laOSuo+sj5lb3gLEDLWlyqnlaUnLqtffs2HXG/B4Iy2S/tU3diJIzz7nV3EFfit2tByRlPq1OUMVYxUteteUrg0KN1OTUevrIGb6AnKEjpEpTzvskTiSBiMsAUWwAGIi9ABOI7eUcDRGI0eb6SaLVB3F6NACWRUHJaUURI9EEYjgndMSfqBYRI91dtFoujqGbN5GSLqdatT6PoENc8ZbzkATM0B+y4K1pMqWjO9FIGrVnksd1kFBkv4PiHtvQkianmqcnJadee8YeqjFPGbNAsMOetE3diJJzTTg02VOBI74kTm63LCD60/wuSJY4L1otEk7bG+hWabmY3jQA9JFKTndPXznx040blQEl51xZYPnJiZDAEUfOKIaSAAthxHmYwTjAJGJCPI62l1PS62g1ZXtR+6t6JitlCXVF8eoK4rAUCeMxgB7EoruLVlvGUI1ahmhhbtyr9uo5Tp72e8vJ9mYBvmfsrcyzzl6lkhq5Q+GeMxJ+JXPrLunea0mTU83Tk5JTr91jmW3TPD5cd85xrUcb+/TqbtvUjSg5F3kVvuO8JA/A4HwwBdC3xZ3tLvdysNByVssNe0PkfHiZhKyBPlLJqfX02Tl7SchVJaeN4StnikQ5teWkI/l1jBCOCy9z8BMKsWZwtRM5VzFhgUSTcwJxpilpXIoUlpUETrm7aLVxe8RNnAM37lV79Zzo/eJ7zodSv2322lfOV0179kAy9MT1bvEdMy096XKqeSrpcqqaOsOVZ9kn8v3kNnxk7DY8Z8dtUzei5JwnL0+FNlmepviGbEsXeXGYb4InFeeSyMRmzAIopDmfAIUmp9bTR841uprS6FzOHJVW4S+cAvjZ2SFfYAgMxDEqDeAk2TbTiZxlxDjPuuVUItUKgiSGpEg9YDt3y91Fq63iB3tTbkAratWePf0/rT1ku23lVCOfMRO82GGvtfQVL6UcPqvTevaYaPWW3HvPaMXfs722qRtRctbISevlZh7GeI90rsx5+q6xxI/Ai4UtOUxhFPmKj5yunn5yLiTofoQWOT/lziHnEWJ2Ssg5gmGQLAmd4lhM4ehP+AIiuNKJnKQLERoZ1OXkqOhXIqmp6tBd4xihHhOjWAU3LavWe/rL+YRtnFNO2pZ+9L7Iua+ly8qpOyr37xOWgfqTw7/hD7bRNnUjSs4KL4IkyQfBxpJvLLPgwcQWr6bARYlv+smpevrLef8lPXT8gRDmRG18Tsi56nybDyIa0MCRMYzexXCeUkdyQn7rlvz8dKJVzhnEsAN0IudCBCOc04O+ErXq/1xO2pbqoEMblZ4uL6dePgTYZ6ZzsrvTNnUjSs5+zgsAUp0j18lr5cwr176ZzkGrnHe1kZqcqqevnIAXlJM0awg55zDiOEQHVYxznJnA0CTGoTM5CSvWQOx1vkgebJZcVzU6kBOiKIj2gYZr1Z49U+eTc5+xP1VVJTXylbriaLms+cOd2shpuZMup15TrV4D/MjYrEzH7F7b1I0oOaFsy1VxvXfs4SWwuZ9W8hWWebXfCc0GBueL2khNTtXTTSGZTAoZ08nkqSPnzAXlhCiikPMlolxHLoKrsjaORxAncRtfuEd92lNOA2weYNi5CWEMbCqILy4k58/Yu5BcqYBG66r1ntNxnDqXnPS9/Q4cVFIj6xnnU9Bf9kgUh3VxsqsnXU41TyVNTr32+1nj5/S0Yb++z9h629SNKDlhTd5WZwzzJZGmB3MAqU3OC2dKcZ4/uwm3lIImK3zJoKd8mhcNbaSSU+vpd/vefTAuKmfMlpNEHCWNjAeIWQArhKI6RY9p8CCH2LAglW/VamI0LF3Mh7DheBbNiRfkIOTib+J0yuhIzlW8CZ60rlrvGUXEmr+c8oWNutBSSybLfAQY2nV+uoQsYOwpNHklldWSJqeapyUlp16jhqLF02NmHshrKWLZB81/J7xTl15JUXISZE21XORbC/JGWwripvUVdVXTORvto6NlKhHiiigdbZWrFL7TRkJ5eXmZEj1WtZ6+csLIxeSkCbac+QRifICknLGnYEKeiWIWvBhBDA2EBlq1OoogRsKNBFWb836mF25R2377fp3R6GoccaYjOavULREORxszC+BCW7XWM46Ii+eS8x5jmd3bJqu3JpPR8W1T3bO6xxxPiQw7AUJLmpxqnpaUnFrtubj5YeOY8keZDxk7fmiyzJ02qUt/9EzJSUwKkUoGCPIlTqRVNUYl54qog9xkjSUuKFX0keSpw7Crp0bVJWfDljPblPPBeeU8RUw1Je0Fon8khGTSpHPf2xxAgbSwwIt8FImEU/yAD0CSKsdRcMtRwpqROS5XUJXFCBemjjoi0VRXF61mjGKTUAzcuFet9xxGDIMXmTM5d8GxU7B3pzWZ7I/bdGg+hybPGPsBmvwiL2tqSZdTzdOTklOvre8ywW3H41emSAdtUrf+MlkppyJ/PwUOVuV+DkCxUIAvYOXXCjm/karnZVFy+mNlVxbgvBQmpyvghbGYzBqgSNWSsfxZcXpsAjqjP4EzfYux2F3SvLfTVdfm4bxYTx/P/qgncc/q+uM7oHg6Cw6H6l45lTQ51TwtaXJqtfrnx++G/j3v93qb1J03vTtyXkeEnNeXwbPNL4rjcIX4/86EIZN91tIFL6UEvwnhsnImBDW4PjQSROiayxlZAMFRCEtwhfjLKW+V05OS83ib8LNuRwwyAzkvx8y45Dptny/GJRW4vhghDE0tb70YQLwJV4m/nK8zv+lJce9Xid/2+coe1q1vFgOuM2thlCTK8D+wZ55AQEDAt/9/awUEBAQEBAQEBPzD3h2rNgiFYRj++ZdDr8DpXEHGJEPXIohaamxqOwVSuhQKob3/pZqQG3D69Xvf7QwODh8uBx8iIiIiIiIilDGUMcyxpYUyhjKGORY0lDGUscWYY7bZ1Uo/LEEZQxlbijlWduOxMJ1QxlDGFmKOWesuO06UMVllbPO2zRbdHLN8uZSi40QZU1XGznsfKw6voc2xa++i40QZE1XGtu6padrpucjmmPQ4UcZElbHP2yofj98W2RyTHifKmKgy1nh1f7/I5pj0OFHGRJWxD/f2p7epyOaY9DhRxlSVsdLH0nH6dAU2x6THiTImq4wNX01y9ypbYHNMepwoY8rKmG1r90Nkc0x6nChjospYtluN70ObY9LjRBmTVMaGoruudkhehzbHpMeJMiapjJ2L8dDVlXv6C22OPaf7VYqTaYQyJq+MPexan3rqY5tjJ59SuvyOMoYyZpb7l9+8BHNMK5Sxma1VGcMcixPK2LxWq4xhjsUJZWxGa1bGMMdIPJQxorChjBEREREREREREdE/e2fXm0QYROH3JB0CW12L1KaAsYICLRHEXgBpFWKamv4Ear303v9/574bcDLOurOraFp8n8TGUXZmPONJP/w4gUDgIfC/poz9IlfsvieJFaF9cu3uMaz8P+Lq5OCB6rljKWOeRqP227li9z1JrAiEthUo4fkb7ri+fVcpqrzRZXsQHv8FPW1CypjmA/Bm27liOmWs9HN2z2290v7NtA9Pv37mtsmoSwDoSYX3NJS3u5RXyTan7nl/zblLKWOetwAdbitXzE4Zs58r29N+5Z+bk6KIAGzzHzycRgBiSr41eE9DebNLeZVsc+qeD8CcO5AyllAjxLgqZU5m6ylj2+/ZwDbM+TZ5WzkDqm5bVAjoNFztiqZqT0v5972W7rIV5W1zNvAgzLkDKWO+Oep7WDjm+rghq4LmfD6rcFGZDVXKWNl8MDu5TM/jbU7nBTLOmhfPi5rTswc01QTuqfbkSjMFLpxH7akmKOWrWOouAu6ptDbVJVzqO1jXlHpa8/SlQ8pYFhPcvdp8XBvRfBUBWIxkZeaKuYM3BCB6nxbDrn+MVjWVMsbPWflgjJ1cxvM8b+mj60QAolp+xpl7PQAQXfYLm3MGvJITVE/eU1WCETDhSuypJ2Sbk7todE/W2lDXm4vvcEu0ufgH3ZORehqJdRmXDiljGdQIMxfhMi0IERATEDVlZeSKuY5Xuk5ALylWm2LiVMoYP2fkgzFGcpmY5+nhZC/tUzcyzoaUVDGAwua8BUZiguop9pSV5BR8ELWnnJBtTu6i0D2l1hK1J6HLd/gIuBRgrPdkpJ5GYl3mpUPKmGIMcu4JFmtzYpJs9QX4JCvjv5H+CsSn/hfS/+Bb0qrlXLMLLFXKGD9n5IMxRnKZmtdDjCjR6/DAyDirgtrOvd4vbs59RGqC6Cn3lJXkDOBCqcQTcs2pu2T1VFob6oo7CHNyT4XU00isy7p0SBnTTNBNNloLTlitXxzLyjBnFdRyTNN5DgmdHHMa+WCMkVym5vWA+rxAxtkYOCv8BaE3w+G7Th044gm6p9qTK8UUUa45eYJUfk4JACWccxfLnFJrQ11xh6LmlHoaiXUZlw4pY5pGqmSDvJL8dbojkKwMcxL2nOSgfT4hrHLMWTQfzEgu0/N6oKUrkHF2jn6tsDnXTB1P0D3VnlyVNidPkMq34gRClLz9VNCcSmtDXXGHouaUehqJdRmXDiljmlugOhgMgBs+S/qjI1nlmnMJvBNOmRJS7nLMWTQfzEgu0/N6+OY8RsYZTy9iTqrXq93z577gCbqn3FNWkpdALc+cPCH7w1ruYppTa52nrrhDCXMKPY3EuoxLh5QxTRcbOB4hFbQpq1xzHsvPYz4TaHJ5XHlmmLNYPpiRXKbn9dB1a3IzzhbYL/PnnAxPUD3lnrKSPAWO88zZNczJXUxzaq1z1P1dc0o9jcS6jEuHlDFFg3A+SzgFOo5FWyFSVY45KzJNpY9Fej5vFk4Zk89Z+WCMlVzG85Q5czLOeLowZ6O0Obmn3lNXzIjQc2rPkubkLozuqbQ21BV3uAWabE59zWw9jcS6XyTBhZQxwS0wd559DFi0Zh8LWRm5YvVNbmYt0XgJLNPvx7jjlDH1nJEPxljJZTxPmTM34+wMmK1f0NZ5ZLY5ZU+9p6okTzZivhrznnoCK6/MqboIuKfS2lBX3OFi/b75CBB7CpSeRmJdZhJcSBn71ecJR+sPN6JE0crCH0RU+blirr3+W6ezOJF+Dpy45KoxcKdSxvg5Ix+MsZLLeJ4yZ27GWYUQHyTPRUBb5JGVMKfsKfdUW0uuCTg7TK5LeCf2VBO08ierw+wuEu4ptTbUFXcYAYOmO1wBGOtrMlJPI7EuOwkupIwJmoQXP94BdLxoQPSMgKlzosrLFfO0CYj3IyBu+lGIBhEQ4U6ljPFzRj4YYyWX8TxlzvyMsyMA9QggtEUeWRlzyp5yT1kpLlJ9AVRbak+eIJU3uzCyp9DaUFfeYQJQHajGGGs9GamnkViXnQQXUsYEY2DzPrmOGy/aXhUAdZyHKytXLJlcR0L/i/+p0Q0Auhnu4U6ljPFzRj4YYySXqXk9TFyKlXHmrvoA6o8W+GjkkQ3whAs1gXvKPWWlWU7S56Y1tSdPUMobXRjVk7U21JV3SNXtT2sLjHVPRuppJNZlJ8GFlLFcCJfu+ukrXdm5Yq72ddz6cezTC38DlTJWOtXMTi7jeRo742z4dG7nkdlwT95TV5rKbNyyVWLlrS6M7GlobezZ+nzsrGtqPe3bSuVDypgB4fFPVSDwcNjplLFgzsBDZqdTxoI5A4F7SkxXP1WBQCAQCAQCgUAgEAgEAoFAIBAIBAKBQGAH+N7euf80EQQBeHZiOVrfD3K+6gPftsYKFp9ordWGlqJQao1RilFRhBD//5+cXa5sJqO3NgpBOl9i5bp3O70fvgAi/Ya1MvZHtbD/cMJ28qDryIISRCtjkuOJstnj2V1YC9stPbIsAYPTRUcBlHS0Mnbp14WxEbAUzfhO18LChCfsTKssj5Zm+y4MxmKr1Wpvg5ztqvo+BJUxL6cp7kgtLMz2T5B3FJYzipGodmBQVrZBzgjzoOz5yhiXM9zr+p++1R6gQBaWcxkKk23EOLsL5MyiyjkMlTEhpytDhcpe4WrUqZMUJxPIJle4NiW7W+E62U170ucXgXnyjkYulO79Vk6ii/im/9TKA+mcWJNyVuYTveXhYsc+VNgunsLkBiRsqJxDURnjcvoyVKDsxWphsg92umQIu34FOLzJxa8bzUxtFQfu8Qm8u5VaJ7uWOUNnTdykh1L6PFnMmqKlWylyQhljsHRjRIxaVp5XUQscnSiaZGtSzvzHiNbqc2CJo86SPbVhRatGPfq4tkgPM3yCOzO/PEuHsd3/TRxHtGIpg7KXK2NMTlaGCpS9fC1M9sFOHTKZ8XE6W8rJm1z8unMmcwos702OT+DdrfQ62ZidS6uGuJc6Txaz7EXTaXKuIy5YlUiUah2xTO58wmhTvhqJy9aEnJWY1j4g4icgIqTDZkRP0TpdgPZDJCbZLu7MJVqltShP86IIVc6hqIyRnBPnLIdMkZeheHsqUAvj1ajHJnPTBeHuAUN0vvh1I/1f7s7RkZ8gulvpdTKS8x3tZB7eN2Zf6jx5R0Ue4JdyVtwHNcRvdLCK+IbWIrwLlpicY2tCzipGcwCd2U3/yLGZvLvgk5NzmXbC+Q7iGt/FndmkK+4mVsOkflk7FJWxabNFkZehQmUvr47ogxXdI4ybKfDIJpe47rYZS6KEt9gE1t0K1cnGTMne7Hd7OJU6T97RrcPp33NCFrFrj2pgqeEHevyIdSDm3Oc1vsblXEWrsdP5i1NuCSyvsGnlnAGYxZb9qMV2cWfOOhnr+FHlHKLK2LQxJUfOFFkZyhezgnKKPtgTUsO5VgKPbHKJ66jy+dm97XiJTWDdrWCdzDUZnpj39o6nUuaJO5JIOQvkl5VsccFCPgLAIh3SXw2rF1/jcrqvex1Lbq3/GfeNPapbUxtYc4byXfyZbWyonENUGWPfc/IyFG9PheX0T+wzOffm5+YGMGSTi19Hr/Gwe3vrh2wC626F6mRczsC8geUkEVdgDT3WuzK+BlhAnAfga1xOcmsWHF9JLq/cOmKHy8l38We+xqrKOUSVMSYnL0Ox9tRAct7Pmdy+ffTAzpZNLiHLc5M5Qacc5RPku6z71xmQk8/7ezm/WpFqiLN9Np+MCrCEdSD4Gpez0Zezx+SkPQtcTr6LyjmslTEmpyxRybJXUE7fmt1/BBiiySWuy+bMRaA/ATn560yTMzBP3tHxdDk/YAxw1xoKnmyMXYitQGKNydnC2H9965VboiMuJ99FyjmPuAHKnq+MMTlZGSql7BWS8705fP/Y9GXgyCaXlGXCjN2hH6gE5GSvM1XOwDx2R6J1JeWsodVkA8kkj9WrvJz8QEWswWJfbFhHXAeiEGPDK+eOuJx8FylnB3EFlD1fGWNysjJUWtkrIOcT8kggm1y/lsUqFZCTvc5UOQPz/B2J1pWUM7/aQKxvSoJrWevdx3xfllekFMg1ooA4A5DtAEATY5IqT9vMO+Xi9f4Rl5PvIuWkJ6oFOxeUPVwZY3KyMlSg7JUq5w3bpRod3V+aYKUM2eSSslwhPY4E5OSvMyBnYJ6/I9a6knJGERLtTeNaiHG10USSydGmpQqAXEsWo3pUtzLVET/Uo2TJbhiX6bEFQk62i5SzRquNcqS/i7anK2Pwjsnpy1DBspevhcku1chVk5BhL0I0uWRt6rpJtPETeNkrWCcbtXJeSeQMzfN3xFtXUk5r2EwPEr41kYjX/P8CSrSRa9CpIlEHotB2Rs6BJcK1st22C0TZyvnFy8l2ibfkbEDfTkvzASjDUxnzZahA2SuNE0fNxJGHBw48mxC1ddnkGpxwwSo8T9zRwK2r/PJK/k/XFuaWFyDhx2oHIJHzK1TmHgwywZNdnJvUr2qHqzL2TzhjRreas0VQGPyfeRSGVsa2G5Izdx8s7zLmPCgq5x+ilbHtZyRjMrcfv3w7Zsw4KCqnsot4OmocRy+C8luaUQ8UZce5PP3o4J2zoCiKoiiKoiiKoiiKoiiKoijK0KGVsf+K5+ePwGD0eln4Z8g9Jz9VIIA/k7fK5NHf30OvWwnu4s/cHfwEGzuha5VMu+AAAAAASUVORK5CYII=" width="924" height="128" class="img_E7b_"></p><p>Take a moment to admire the salmon pinks. Is it not lovely?</p><p>Finally we come to the main act. Plugging in Application Insights is as simple as dropping in <code>loggerConfiguration.WriteTo.ApplicationInsights</code> into our configuration. You&#x27;ll note that this depends upon the existence of an application setting of <code>APPINSIGHTS_INSTRUMENTATIONKEY</code> - this is the secret sauce that we need to be in place so we can pipe logs merrily to Application Insights. So you&#x27;ll need this configuration in place so this works.</p><p><img loading="lazy" alt="screenshot of application insights with our output" src="/assets/images/application-insights-properties-72237e21926a47f0f2bc04aee0237843.png" width="806" height="1068" class="img_E7b_"></p><p>As you can see, we now have the likes of <code>BuildNumber</code>, <code>CommitHash</code> and friends visible on each log. Happy diagnostic days!</p><p>I&#x27;m indebted to the marvellous <a href="https://twitter.com/MarcelMichau" target="_blank" rel="noopener noreferrer">Marcel Michau</a> who showed me how to get the fiddlier parts of how to get Application Insights plugged in the right way. Thanks chap!</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/tags/asp-net">asp.net</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/tags/azure">Azure</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/tags/application-insights">Application Insights</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/tags/serilog">Serilog</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about ASP.NET, Serilog and Application Insights" href="/2021/01/30/aspnet-serilog-and-application-insights"><b>Read More</b></a></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Support me</div><ul class="footer__items"><li class="footer__item"><a href="https://www.buymeacoffee.com/qUBm0Wh" rel="noopener" target="_blank"><img src="https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png" loading="lazy" alt="Buy Me A Coffee" style="height: 60px !important;width: 217px !important;"></a></li><li class="footer__item"><div style="display: flex; align-items: center;"><iframe src="https://github.com/sponsors/johnnyreilly/button" title="Sponsor johnnyreilly" height="35" width="116" style="border: 0;"></iframe><div>&nbsp;on GitHub</div></div></li></ul></div><div class="col footer__col"><div class="footer__title">Feeds</div><ul class="footer__items"><li class="footer__item"><a href="https://blog.johnnyreilly.com/rss.xml" target="_blank" rel="noopener noreferrer" class="footer__link-item">RSS<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://blog.johnnyreilly.com/atom.xml" target="_blank" rel="noopener noreferrer" class="footer__link-item">Atom<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 John Reilly. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.0f17538c.js"></script>
<script src="/assets/js/main.aed8d9bc.js"></script>
</body>
</html>