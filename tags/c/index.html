<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.8">
<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="I CAN MAKE THIS WORK RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="I CAN MAKE THIS WORK Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-51754530-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="icon" href="/img/favicon/profile.jpg">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="rgb(37, 194, 160)">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/img/favicon/apple-touch-icon.png"><title data-react-helmet="true">5 posts tagged with &quot;c#&quot; | I CAN MAKE THIS WORK</title><meta data-react-helmet="true" property="og:title" content="5 posts tagged with &quot;c#&quot; | I CAN MAKE THIS WORK"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://blog.johnnyreilly.com/img/profile.png"><meta data-react-helmet="true" name="twitter:image" content="https://blog.johnnyreilly.com/img/profile.png"><meta data-react-helmet="true" property="og:url" content="https://blog.johnnyreilly.com/tags/c"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-react-helmet="true" name="robots" content="max-image-preview:large"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://blog.johnnyreilly.com/tags/c"><link data-react-helmet="true" rel="alternate" href="https://blog.johnnyreilly.com/tags/c" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://blog.johnnyreilly.com/tags/c" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.26111b35.css">
<link rel="preload" href="/assets/js/runtime~main.d9f6e547.js" as="script">
<link rel="preload" href="/assets/js/main.ea3f11b8.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">I CAN MAKE THIS WORK</b></a><a class="navbar__item navbar__link" href="/about">About</a><a class="navbar__item navbar__link" href="/blog-archive">Blog Archive</a><a class="navbar__item navbar__link" href="/talks">Talks</a></div><div class="navbar__items navbar__items--right"><a href="https://polywork.johnnyreilly.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Polywork<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/johnnyreilly" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://twitter.com/johnny_reilly" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">🌜</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">🌞</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-tags-post-list-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_2ahu thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_2hhb margin-bottom--md">Recent posts</div><ul class="sidebarItemList_2xAf"><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/2021/10/31/nswag-generated-c-sharp-client-property-name-clash">NSwag generated C# client: Open API property name clashes and decimal types rather than double</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/2021/10/18/docusaurus-meta-tags-and-google-discover">Docusaurus, meta tags and Google Discover</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/2021/10/15/structured-data-seo-and-react">Structured data, SEO and React</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/2021/09/12/permissioning-azure-pipelines-bicep-role-assignments">Permissioning Azure Pipelines with Bicep and Azure RBAC Role Assignments</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/2021/09/10/google-apis-authentication-with-typescript">Google APIs: authentication with TypeScript</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><header class="margin-bottom--xl"><h1>5 posts tagged with &quot;c#&quot;</h1><a href="/tags">View All Tags</a></header><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/2018/11/17/snapshot-testing-for-c">Snapshot Testing for C#</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2018-11-17T00:00:00.000Z" itemprop="datePublished">November 17, 2018</time> · <!-- -->6 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://twitter.com/johnny_reilly" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://blog.johnnyreilly.com/img/profile.jpg" alt="John Reilly"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://twitter.com/johnny_reilly" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">John Reilly</span></a></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>If you&#x27;re a user of Jest, you&#x27;ve no doubt heard of and perhaps made use of <a href="https://jestjs.io/docs/en/snapshot-testing" target="_blank" rel="noopener noreferrer">snapshot testing</a>.</p><p>Snapshot testing is an awesome tool that is generally discussed in the context of JavaScript React UI testing. But snapshot testing has a wider application than that. Essentially it is profoundly useful where you have functions which produce a complex structured output. It could be a React UI, it could be a list of FX prices. The type of data is immaterial; it&#x27;s the amount of it that&#x27;s key.</p><p>Typically there&#x27;s a direct correlation between the size and complexity of the output of a method and the length of the tests that will be written for it. Let&#x27;s say you&#x27;re outputting a class that contains 20 properties. Congratulations! You get to write 20 assertions in one form or another for each test case. Or a single assertion whereby you supply the expected output by hand specifying each of the 20 properties. Either way, that&#x27;s not going to be fun. And just imagine the time it would take to update multiple test cases if you wanted to change the behaviour of the method in question. Ouchy.</p><p>Time is money kid. What you need is snapshot testing. Say goodbye to handcrafted assertions and hello to JSON serialised output checked into source control. Let&#x27;s unpack that a little bit. The usefulness of snapshot testing that I want in C# is predominantly about removing the need to write and maintain multiple assertions. Instead you write tests that compare the output of a call to your method with JSON serialised output you&#x27;ve generated on a previous occasion.</p><p>This approach takes less time to write, less time to maintain and the solid readability of JSON makes it more likely you&#x27;ll pick up on bugs. It&#x27;s so much easier to scan JSON than it is a list of assertions.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="putting-the-snapshot-into-c">Putting the Snapshot into C#<a aria-hidden="true" class="hash-link" href="#putting-the-snapshot-into-c" title="Direct link to heading">​</a></h2><p>Now if you&#x27;re writing tests in JavaScript or TypeScript then Jest already has your back with CLI snapshot generation and <code>shouldMatchSnapshot</code>. However getting to nearly the same place in C# is delightfully easy. What are we going to need?</p><p>First up, a serializer which can take your big bad data structures and render them as JSON. Also we&#x27;ll use it to rehydrate our data structure into an object ready for comparison. We&#x27;re going to use <a href="https://www.newtonsoft.com/json" target="_blank" rel="noopener noreferrer">Json.NET</a>.</p><p>Next up we need a way to compare our outputs with our rehydrated snapshots - we need a C# <code>shouldMatchSnapshot</code>. There&#x27;s many choices out there, but for my money <a href="https://fluentassertions.com" target="_blank" rel="noopener noreferrer">Fluent Assertions</a> is king of the hill.</p><p>Finally we&#x27;re going to need Snapshot, a little helper utility I put together:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#d6deeb"><span class="token plain">using System;</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">using System.IO;</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">using Newtonsoft.Json;</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">using Newtonsoft.Json.Serialization;</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">namespace Test.Utilities {</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    public static class Snapshot {</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        private static readonly JsonSerializer StubSerializer = new JsonSerializer {</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">            ContractResolver = new CamelCasePropertyNamesContractResolver(),</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">            NullValueHandling = NullValueHandling.Ignore</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        };</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        private static JsonTextWriter MakeJsonTextWriter(TextWriter sw) =&gt; new JsonTextWriter(sw) {</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">            Formatting = Formatting.Indented,</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">            IndentChar = &#x27; &#x27;,</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">            Indentation = 2</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        };</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        /// &lt;summary&gt;</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        /// Make yourself some JSON! Usage looks like this:</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        /// Stubs.Make($&quot;{System.AppDomain.CurrentDomain.BaseDirectory}..\\..\\..\\data.json&quot;, myData);</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        /// &lt;/summary&gt;</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        public static void Make&lt;T&gt;(string stubPath, T data) {</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">            try {</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">                if (string.IsNullOrEmpty(stubPath))</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">                    throw new ArgumentNullException(nameof(stubPath));</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">                if (data == null)</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">                    throw new ArgumentNullException(nameof(data));</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">                using(var sw = new StreamWriter(stubPath))</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">                using(var writer = MakeJsonTextWriter(sw)) {</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">                    StubSerializer.Serialize(writer, data);</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">            } catch (Exception exc) {</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">                throw new Exception($&quot;Failed to make {stubPath}&quot;, exc);</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        public static string Serialize&lt;T&gt;(T data) {</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">            using (var sw = new StringWriter())</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">            using(var writer = MakeJsonTextWriter(sw)) {</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">                StubSerializer.Serialize(writer, data);</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">                return sw.ToString();</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        public static string Load(string filename) {</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">            var content = new StreamReader(</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">                File.OpenRead(filename)</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">            ).ReadToEnd();</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">            return content;</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Let&#x27;s look at the methods: <code>Make</code> and <code>Load</code>. Make is what we&#x27;re going to use to create our snapshots. Load is what we&#x27;re going to use to, uh, load our snapshots.</p><p>What does usage look like? Great question. Let&#x27;s go through the process of writing a C# snapshot test.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="taking-snapshot-for-a-spin">Taking Snapshot for a Spin<a aria-hidden="true" class="hash-link" href="#taking-snapshot-for-a-spin" title="Direct link to heading">​</a></h2><p>First of all, we&#x27;re going to need a method to test that outputs a data structure which is more than just a scalar value. Let&#x27;s use this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#d6deeb"><span class="token plain">public class Leopard {</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    public string Name { get; set; }</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    public int Spots { get; set; }</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">}</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">public class LeopardService {</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    public Leopard[] GetTheLeopards() {</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        return new Leopard[] {</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">            new Leopard { Spots = 42, Name = &quot;Nimoy&quot; },</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">            new Leopard { Spots = 900, Name = &quot;Dotty&quot; }</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        };</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Yes - our trusty <code>LeopardService</code>. As you can see, the <code>GetTheLeopards</code> method returns an array of <code>Leopard</code>s. For now, let&#x27;s write a test using <code>Snapshot</code>: (ours is an XUnit test; but <code>Snapshot</code> is agnostic of this)</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#d6deeb"><span class="token plain">[Fact]</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">public void GetTheLeopards_should_return_expected_Leopards() {</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    // Arrange</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    var leopardService = new LeopardService();</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    // Act</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    var leopards = leopardService.GetTheLeopards();</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    // UNCOMMENT THE LINE BELOW *ONLY* WHEN YOU WANT TO GENERATE THE SNAPSHOT</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    Snapshot.Make($&quot;{System.AppDomain.CurrentDomain.BaseDirectory}..\\..\\..\\Snapshots\\leopardsSnapshot.json&quot;, leopards);</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    // Assert</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    var snapshotLeopards = JsonConvert.DeserializeObject&lt;leopard[]&gt;(Snapshot.Load(&quot;Snapshots/leopardsSnapshot.json&quot;));</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    snapshotLeopards.Should().BeEquivalentTo(leopards);</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">}</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">&lt;/leopard[]&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Before we run this for the first time we need to setup our testing project to be ready for snapshots. First of all we add a <code>Snapshot</code> folder to the test project. The we also add the following to the <code>.csproj</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly xml"><pre tabindex="0" class="prism-code language-xml codeBlock_23N8 thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#d6deeb"><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">ItemGroup</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">Content</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">Include</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(127, 219, 202)">Snapshots\**</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">CopyToOutputDirectory</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">Always</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">CopyToOutputDirectory</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">Content</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">ItemGroup</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>This includes the snapshots in the compile output for when tests are being run.</p><p>Now let&#x27;s run the test. It will generate a <code>leopardsSnapshot.json</code> file:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#d6deeb"><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;name&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;Nimoy&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;spots&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">42</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;name&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;Dotty&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;spots&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">900</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>With our snapshot in place, we comment out the <code>Snapshot.Make...</code> line and we have a passing test. Let&#x27;s commit our code, push and go about our business.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="time-passes">Time Passes...<a aria-hidden="true" class="hash-link" href="#time-passes" title="Direct link to heading">​</a></h2><p>Someone decides that the implementation of <code>GetTheLeopards</code> needs to change. Defying expectations it seems that Dotty the leopard should now have 90 spots. I know... Business requirements, right?</p><p>If we make that change we&#x27;d ideally expect our trusty test to fail. Let&#x27;s see what happens:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#d6deeb"><span class="token plain">----- Test Execution Summary -----</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">Leopard.Tests.Services.LeopardServiceTests.GetTheLeopards_should_return_expected_Leopards:</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    Outcome: Failed</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    Error Message:</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    Expected item[1].Spots to be 90, but found 900.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Boom! We are protected!</p><p>Since this is a change we&#x27;re completely happy with we want to update our <code>leopardsSnapshot.json</code> file. We could make our test pass by manually updating the JSON. That&#x27;d be fine. But why work when you don&#x27;t have to? Let&#x27;s uncomment our <code>Snapshot.Make...</code> line and run the test the once.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#d6deeb"><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;name&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;Nimoy&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;spots&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">42</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;name&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;Dotty&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;spots&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">90</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>That&#x27;s right, we have an updated snapshot! Minimal effort.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="next-steps">Next Steps<a aria-hidden="true" class="hash-link" href="#next-steps" title="Direct link to heading">​</a></h2><p>This is a basic approach to getting the goodness of snapshot testing in C#. It could be refined further. To my mind the uncommenting / commenting of code is not the most elegant way to approach this and so there&#x27;s some work that could be done around this area.</p><p>Happy snapshotting!</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/snapshot-testing">snapshot testing</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/c">c#</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/jest">jest</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about Snapshot Testing for C#" href="/2018/11/17/snapshot-testing-for-c"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/2012/11/13/a-nicer-net-api-for-bloombergs-open-api">Getting up to speed with Bloomberg&#x27;s Open API...</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2012-11-13T00:00:00.000Z" itemprop="datePublished">November 13, 2012</time> · <!-- -->6 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://twitter.com/johnny_reilly" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://blog.johnnyreilly.com/img/profile.jpg" alt="John Reilly"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://twitter.com/johnny_reilly" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">John Reilly</span></a></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>A good portion of any devs life is usually spent playing with APIs. If you need to integrate some other system into the system you&#x27;re working on (and it&#x27;s rare to come upon a situation where this doesn&#x27;t happen at some point) then it&#x27;s API time.</p><p>Some APIs are well documented and nice to use. Some aren&#x27;t. I recently spent a goodly period of time investigating <a href="http://www.openbloomberg.com/open-api/" target="_blank" rel="noopener noreferrer">Bloomberg&#x27;s Open API</a> and it was a slightly painful experience. So much so that I thought it best to write up my own experiences and maybe I can save others time and a bit of pain.</p><p>Also, as I investigated the Bloomberg Open API I found myself coming up with my own little mini-C#-API. (It&#x27;s generally a sure sign you&#x27;ve found an API you don&#x27;t love if you end up writing your own wrapper.) This mini API did the heavy lifting for me and just handed back nicely structured data to deal with. I have included this wrapper here as well.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="research">Research<a aria-hidden="true" class="hash-link" href="#research" title="Direct link to heading">​</a></h2><p>The initial plan was to, through code, extract Libor and Euribor rates from Bloomberg. I had access to a Bloomberg terminal and I had access to the internet - what could stop me? After digging around for a little while I found some useful resources that could be accessed from the Bloomberg terminal:</p><ol><li>Typing “<code>WAPI&amp;lt;GO&amp;gt;</code>” into Bloomberg lead me to the Bloomberg API documentation.</li><li>Typing “<code>DOCS 2055451&amp;lt;GO&amp;gt;</code>” into Bloomberg (I know - it&#x27;s a bit cryptic) provided me with samples of how to use the Bloomberg API in VBA</li></ol><p><img src="https://4.bp.blogspot.com/-mZxP0-jXRIo/UKJ8y8Gs5AI/AAAAAAAAAW0/qNyIN9hGBiQ/s400/bloombergwapidocumentation.gif"></p><p>To go with this I found some useful documentation of the Bloomberg Open API <a href="http://www.openbloomberg.com/files/2012/10/blpapi-developers-guide.pdf" target="_blank" rel="noopener noreferrer">here</a> and I found the .NET Bloomberg Open API itself <a href="http://www.openbloomberg.com/open-api/" target="_blank" rel="noopener noreferrer">here</a>.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="hello-world">Hello World?<a aria-hidden="true" class="hash-link" href="#hello-world" title="Direct link to heading">​</a></h2><p>The first goal when getting up to speed with an API is getting it to do something. Anything. Just stick a fork into it and see if it croaks. Sticking a fork into Open API was achieved by taking the 30-odd example apps included in the Bloomberg Open API and running each in turn on the Bloomberg box until I had my &quot;he&#x27;s alive!!&quot; moment. (I did find it surprising that not all of the examples worked - I don&#x27;t know if there&#x27;s a good reason for this...)</p><p>However, when I tried to write my own C# console application to interrogate the Open API it wasn&#x27;t as plain sailing as I&#x27;d hoped. I&#x27;d write something that looked correct, compiled successfully and deploy it onto the Bloomberg terminal only to have it die a sad death whenever I tried to fire it off.</p><p>I generally find the fastest way to get up and running with an API is to debug it. To make calls to the API and then examine, field by field and method by method, what is actually there. This wasn&#x27;t really an option with my console app though. I was using a shared Bloomberg terminal with very limited access. No Visual Studio on the box and no remote debugging enabled.</p><p>It was then that I had something of a eureka moment. I realised that the code in the VBA samples I&#x27;d downloaded from Bloomberg looked quite similar to the C# code samples that shipped with Open API. Hmmmm.... Shortly after this I found myself sat at the Bloomberg machine debugging the Bloomberg API using the VBA IDE in Excel. (For the record, these debugging tools are aren&#x27;t too bad at all - they&#x27;re nowhere near as slick as their VS counterparts but they do the job.) This was my <a href="http://en.wikipedia.org/wiki/Rosetta_Stone" target="_blank" rel="noopener noreferrer">Rosetta Stone</a> <!-- -->-<!-- --> I could take what I&#x27;d learned from the VBA samples and translate that into equivalent C# / .NET code (bearing in mind what I&#x27;d learned from debugging in Excel and in fact sometimes bringing along the VBA comments themselves if they provided some useful insight).</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="hes-the-bloomberg-im-the-wrapper">He&#x27;s the Bloomberg, I&#x27;m the Wrapper<a aria-hidden="true" class="hash-link" href="#hes-the-bloomberg-im-the-wrapper" title="Direct link to heading">​</a></h2><p>So I&#x27;m off and romping... I have something that works. Hallelujah! Now that that hurdle had been crossed I found myself examining the actual Bloomberg API code itself. It functioned just fine but it did a couple of things that I wasn&#x27;t too keen on:</p><ol><li>The Bloomberg API came with custom data types. I didn&#x27;t want to use these unless it was absolutely necessary - I just wanted to stick to the standard .NET types. This way if I needed to hand data onto another application I wouldn&#x27;t be making each of these applications dependant on the Bloomberg Open API.</li><li>To get the data out of the Bloomberg API there was an awful lot of boilerplate. Code which handled the possibilities of very large responses that might be split into several packages. Code which walked the element tree returned from Bloomberg parsing out the data. It wasn&#x27;t a beacon of simplicity.</li></ol><p>I wanted an API that I could simply invoke with security codes and required fields. And in return I wanted to be passed nicely structured data. As I&#x27;ve already mentioned a desire to not introduce unnecessary dependencies I thought it might well suit to make use of nested Dictionaries. I came up with a simple C# Console project / application which had a reference to the Bloomberg Open API. It contained the following class; essentially my wrapper for Open API operations: (please note this is deliberately a very &quot;bare-bones&quot; implementation)</p><script src="https://gist.github.com/4065815.js?file=BloombergApi.cs"></script><p>The project also contained this class which demonstrates how I made use of my wrapper:</p><script src="https://gist.github.com/4065815.js?file=NicerBloombergApiDemo.cs"></script><p>And here&#x27;s what the output looked like:</p><p><img src="https://1.bp.blogspot.com/-1ghUYqbl0AE/UKJ_3vsuKqI/AAAAAAAAAXI/pPKR5dup48U/s400/Bloomberg.png"></p><p>This covered my bases. It was simple, it was easy to consume and it didn&#x27;t require any custom types. My mini-API is only really catering for my own needs (unsurprisingly). However, there&#x27;s lots more to the Bloomberg Open API and I may end up taking this further in the future if I encounter use cases that my current API doesn&#x27;t cover.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="update-07122012">Update (07/12/2012)<a aria-hidden="true" class="hash-link" href="#update-07122012" title="Direct link to heading">​</a></h2><p>Finally, a PS. I found in the <a href="http://www.openbloomberg.com/faq/" target="_blank" rel="noopener noreferrer">Open API FAQs</a> that <em>&quot;Testing any of that functionality currently requires a valid Bloomberg Desktop API (DAPI), Server API (SAPI) or Managed B-Pipe subscription. Bloomberg is planning on releasing a stand-alone simulator which will not require a subscription.&quot;</em> There isn&#x27;t any word yet on this stand-alone simulator. I emailed Bloomberg at <a href="mailto:open-tech@bloomberg.net" target="_blank" rel="noopener noreferrer">open-tech@bloomberg.net</a> to ask about this. They kindly replied that <em>&quot;Unfortunately it is not yet available. We understand that this makes testing API applications somewhat impractical, so we&#x27;re continuing to work on this tool.&quot;</em> Fingers crossed for something we can test soon!</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="note-to-self-because-i-keep-forgetting">Note to self (because I keep forgetting)<a aria-hidden="true" class="hash-link" href="#note-to-self-because-i-keep-forgetting" title="Direct link to heading">​</a></h2><p>If you&#x27;re looking to investigate what data is available about a security in Bloomberg it&#x27;s worth typing “<code>FLDS&amp;lt;GO&amp;gt;</code>” into Bloomberg. This is the Bloomberg Fields Finder. Likewise, if you&#x27;re trying to find a security you could try typing “<code>SECF&amp;lt;GO&amp;gt;</code>” into Bloomberg as this is the Security Finder.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/net">.NET</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/c">c#</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/bloomberg">Bloomberg</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/open-api">Open API</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about Getting up to speed with Bloomberg&#x27;s Open API..." href="/2012/11/13/a-nicer-net-api-for-bloombergs-open-api"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/2012/04/05/making-pdfs-from-html-in-c-using">Making PDFs from HTML in C# using WKHTMLtoPDF</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2012-04-05T00:00:00.000Z" itemprop="datePublished">April 5, 2012</time> · <!-- -->7 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://twitter.com/johnny_reilly" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://blog.johnnyreilly.com/img/profile.jpg" alt="John Reilly"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://twitter.com/johnny_reilly" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">John Reilly</span></a></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_31ik" id="update-03012013">Update 03/01/2013<a aria-hidden="true" class="hash-link" href="#update-03012013" title="Direct link to heading">​</a></h2><p>I&#x27;ve written a subsequent post which builds on the work of this original post. The new post exposes this functionality via a WCF service and can be found <a href="http://icanmakethiswork.blogspot.co.uk/2013/01/html-to-pdf-using-wcf-service.html" target="_blank" rel="noopener noreferrer">here</a>.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="making-pdfs-from-html">Making PDFs from HTML<a aria-hidden="true" class="hash-link" href="#making-pdfs-from-html" title="Direct link to heading">​</a></h2><p>I wanted to talk about an approach I&#x27;ve discovered for making PDFs directly from HTML. I realise that in these wild and crazy days of <a href="http://mozilla.github.com/pdf.js/" target="_blank" rel="noopener noreferrer">PDF.js</a> and the like that techniques like this must seem very old hat. That said, this technique works and more importantly it solves a problem I was faced with but without forcing the users to move the &quot;newest hottest version of X&quot;. Much as many of would love to solve problems this way, alas many corporations move slower than that and in the meantime we still have to deliver - we still have to meet requirements. Rather than just say &quot;I did this&quot; I thought I&#x27;d record how I got to this point in the first place. I don&#x27;t know about you but I find the reasoning behind why different technical decisions get made quite an interesting topic...</p><p>For some time I&#x27;ve been developing / supporting an application which is used in an intranet environment where the company mandated browser is still IE 6. It was a requirement that there be &quot;print&quot; functionality in this application. As is well known (even by Microsoft themselves) the print functionality in IE 6 was never fantastic. But the requirement for usable printouts remained.</p><p>The developers working on the system before me decided to leverage Crystal Reports (remember that?). Essentially there was a reporting component to the application at the time which created custom reports using Crystal and rendered them to the user in the form of PDFs (which have been eminently printable for as long as I care to remember). One of the developers working on the system realised that it would be perfectly possible to create some &quot;reports&quot; within Crystal which were really &quot;print to PDF&quot; screens for the app.</p><p>It worked well and this solution stayed in place for a very long time. However, some years down the line the Crystal Reports was discarded as the reporting mechanism for the app. But we were unable to decommission Crystal entirely because we still needed it for printing.</p><p>I&#x27;d never really liked the Crystal solution for a number of reasons:</p><ol><li>We needed custom stored procs to drive the Crystal print screens which were near duplicates of the main app procs. This duplication of effort never felt right.</li><li>We had to switch IDEs whenever we were maintaining our print screens. And the Crystal IDE is not a joy to use.</li><li>Perhaps most importantly, for certain users we needed to hide bits of information from the print. The version of Crystal we were using did not make the dynamic customisation of our print screens a straightforward proposition. (In its defence we weren&#x27;t really using it for what it was designed for.) As a result the developers before me had ended up creating various versions of each print screen revealing different levels of information. As you can imagine, this meant that the effort involved in making changes to the print screens had increased exponentially</li></ol><p>It occurred to me that it would be good if we could find some way of generating our own PDF reports without using Crystal that would be a step forward. It was shortly after this that I happened upon <a href="http://code.google.com/p/wkhtmltopdf/" target="_blank" rel="noopener noreferrer">WKHTMLtoPDF</a>. This is an open source project which describes itself as a <em>&quot;Simple shell utility to convert html to pdf using the webkit rendering engine, and qt.&quot;</em> I tested it out on various websites and it worked. It wasn&#x27;t by any stretch of the imagination a perfect HTML to PDF tool but the quality it produced greatly outstripped the presentation currently in place via Crystal.</p><p>This was just the ticket. Using WKHTMLtoPDF I could have simple web pages in the application which could be piped into WKHTMLtoPDF to make a PDF as needed. It could be dynamic - because ASP.NET is dynamic. We wouldn&#x27;t need to write and maintain custom stored procs anymore. And happily we would no longer need to use Crystal.</p><p>Before we could rid ourselves of Crystal though, I needed a way that I could generate these PDFs on the fly within the website. For this I ended up writing a simple wrapper class for WKHTMLtoPDF which could be used to invoke it on the fly. In fact a good portion of this was derived from various contributions on <a href="http://stackoverflow.com/q/1331926" target="_blank" rel="noopener noreferrer">a post on StackOverflow</a>. It ended up looking like this:</p><script src="https://gist.github.com/2341776.js?file=PdfGenerator.cs"></script><p>With this wrapper I could pass in URLs and extract out PDFs. Here&#x27;s a couple of examples of me doing just that:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#d6deeb"><span class="token plain">//Create PDF from a single URL</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    var pdfUrl = PdfGenerator.HtmlToPdf(pdfOutputLocation: &quot;~/PDFs/&quot;,</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        outputFilenamePrefix: &quot;GeneratedPDF&quot;,</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        urls: new string[] { &quot;http://news.bbc.co.uk&quot; });</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    //Create PDF from multiple URLs</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    var pdfUrl = PdfGenerator.HtmlToPdf(pdfOutputLocation: &quot;~/PDFs/&quot;,</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        outputFilenamePrefix: &quot;GeneratedPDF&quot;,</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        urls: new string[] { &quot;http://www.google.co.uk&quot;, &quot;http://news.bbc.co.uk&quot; });</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>As you can see from the second example above it&#x27;s possible to pipe a number of URLs into the wrapper all to be rendered to a single PDF. Most of the time this was surplus to our requirements but it&#x27;s good to know it&#x27;s possible. Take a look at the BBC website PDF generated by the first example:</p><iframe src="https://docs.google.com/file/d/0B87K8-qxOZGFYktEWGtXRXJSSS1ZWFR4emFfMmVxZw/preview" width="500" height="500"></iframe><p>Pretty good, no? As you can see it&#x27;s not perfect from looking at the titles (bit squashed) but I deliberately picked a more complicated page to show what WKHTMLtoPDF was capable of. The print screens I had in mind to build would be significantly simpler than this.</p><p>Once this was in place I was able to scrap the Crystal solution. It was replaced with a couple of &quot;print to PDF&quot; ASPXs in the main web app which would be customised when rendering to hide the relevant bits of data from the user. These ASPXs would be piped into the HtmlToPdf method as needed and then the user would be redirected to that PDF. If for some reason the PDF failed to render the users would see the straight &quot;print to PDF&quot; ASPX - just not as a PDF if you see what I mean. I should say that it was pretty rare for a PDF to not render but this was my failsafe.</p><p>This new solution had a number of upsides from our perspective:</p><ul><li>Development maintenance time (and consequently cost for our customers) for print screens was significantly reduced. This was due to the print screens being part of the main web app. This meant they shared styling etc with all the other web screens and the dynamic nature of ASP.NET made customising a screen on the fly simplicity itself.</li><li>We were now able to regionalise our print screens for the users in the same way as we did with our main web app. This just wasn&#x27;t realistic with the Crystal solution because of the amount of work involved.</li><li>I guess this is kind of a <a href="http://en.wikipedia.org/wiki/Don%27t_repeat_yourself" target="_blank" rel="noopener noreferrer">DRY</a> solution :-)</li></ul><p>You can easily make use of the above approach yourself. All you need do is download and install <a href="http://code.google.com/p/wkhtmltopdf/" target="_blank" rel="noopener noreferrer">WKHTMLtoPDF</a> on your machine. I advise using version 0.9.9 as the later release candidates appear slightly buggy at present.</p><p>Couple of gotchas:</p><ol><li>Make sure that you pass the correct installation path to the HtmlToPdf method if you installed it anywhere other than the default location. You&#x27;ll see that the class assumes the default if it wasn&#x27;t passed</li><li>Ensure that Read and Execute rights are granted to the wkhtmltopdf folder for the relevant process</li><li>Ensure that Write rights are granted for the location you want to create your PDFs for the relevant process</li></ol><p>In our situation we are are invoking this directly in our web application on demand. I have no idea how this would scale - perhaps not well. This is not really an issue for us as our user base is fairly small and this functionality isn&#x27;t called excessively. I think if this was used much more than it is I&#x27;d be tempted to hive off this functionality into a separate app. But this works just dandy for now.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/wkhtmltopdf">wkhtmltopdf</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/webkit">webkit</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/c">c#</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/html">html</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/pdf">pdf</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about Making PDFs from HTML in C# using WKHTMLtoPDF" href="/2012/04/05/making-pdfs-from-html-in-c-using"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/2012/03/17/using-pubsub-observer-pattern-to">Using the PubSub / Observer pattern to emulate constructor chaining without cluttering up global scope</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2012-03-17T00:00:00.000Z" itemprop="datePublished">March 17, 2012</time> · <!-- -->6 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://twitter.com/johnny_reilly" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://blog.johnnyreilly.com/img/profile.jpg" alt="John Reilly"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://twitter.com/johnny_reilly" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">John Reilly</span></a></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>Yes the title of this post is <!-- -->*<strong>painfully</strong>*<!-- --> verbose. Sorry about that. Couple of questions for you: - Have you ever liked the way you can have base classes in C# which can then be inherited and subclassed <u>in a different file / class</u></p><p>?</p><ul><li>Have you ever thought; gosh it&#x27;d be nice to do something like that in JavaScript...</li><li>Have you then looked at JavaScripts prototypical inheritance and thought &quot;right.... I&#x27;m sure it&#x27;s possible but this going to end up like <a href="http://en.wikipedia.org/wiki/War_and_Peace" target="_blank" rel="noopener noreferrer">War and Peace</a>&quot;</li><li>Have you then subsequently thought &quot;and hold on a minute... even if I did implement this using the prototype and split things between different files / modules wouldn&#x27;t I have to pollute the global scope to achieve that? And wouldn&#x27;t that mean that my code was exposed to the vagaries of any other scripts on the page? Hmmm...&quot;</li><li><a href="http://www.thrillingdetective.com/eyes/oxford.html" target="_blank" rel="noopener noreferrer">Men! Are you skinny? Do bullies kick sand in your face?</a> (Just wanted to see if you were still paying attention...)</li></ul><h2 class="anchor anchorWithStickyNavbar_31ik" id="the-problem">The Problem<a aria-hidden="true" class="hash-link" href="#the-problem" title="Direct link to heading">​</a></h2><p>Well, the above thoughts occurred to me just recently. I had a situation where I was working on an MVC project and needed to build up quite large objects within JavaScript representing various models. The models in question were already implemented on the server side using classes and made extensive use of inheritance because many of the properties were shared between the various models. That is to say we would have models which were implemented through the use of a class inheriting a base class which in turn inherits a further base class. With me? Good. Perhaps I can make it a little clearer with an example. Here are my 3 classes. First BaseReilly.cs:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#d6deeb"><span class="token plain">public class BaseReilly</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">{</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    public string LastName { get; set; }</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        public BaseReilly()</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">            LastName = &quot;Reilly&quot;;</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Next BoyReilly.cs (which inherits from BaseReilly):</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#d6deeb"><span class="token plain">public class BoyReilly : BaseReilly</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">{</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    public string Sex { get; set; }</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    public BoyReilly()</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        : base()</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        Sex = &quot;It is a manchild&quot;;</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>And finally JohnReilly.cs (which inherits from BoyReilly which in turn inherits from BaseReilly):</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#d6deeb"><span class="token plain">public class JohnReilly : BoyReilly</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">{</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    public string FirstName { get; set; }</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    public JohnReilly()</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        : base()</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">        FirstName = &quot;John&quot;;</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Using the above I can create myself my very own &quot;JohnReilly&quot; like so:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cs"><pre tabindex="0" class="prism-code language-cs codeBlock_23N8 thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#d6deeb"><span class="token plain">var johnReilly = new JohnReilly();</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>And it will look like this: <img src="/assets/images/C%2523%2Bversion%2Bof%2BJohnReilly-c6c2ee6ef4072f789f9e92c2c66ccfb5.png"></p><p>I was looking to implement something similar on the client and within JavaScript. I was keen to ensure <a href="http://en.wikipedia.org/wiki/Code_reuse" target="_blank" rel="noopener noreferrer">code reuse</a>. And my inclination to keep things simple made me wary of making use of the <a href="http://bonsaiden.github.com/JavaScript-Garden/#object.prototype" target="_blank" rel="noopener noreferrer">prototype</a>. It is undoubtedly powerful but I don&#x27;t think even the mighty <a href="http://javascript.crockford.com/prototypal.html" target="_blank" rel="noopener noreferrer">Crockford</a> would consider it &quot;simple&quot;. Also I had the reservation of exposing my object to the global scope. So what to do? I had an idea.... ## The Big Idea</p><p>For a while I&#x27;ve been making use explicit use of the <a href="http://en.wikipedia.org/wiki/Observer_pattern" target="_blank" rel="noopener noreferrer">Observer pattern</a> in my JavaScript, better known by most as the publish/subscribe (or &quot;PubSub&quot;) pattern. There&#x27;s a million JavaScript libraries that facilitate this and after some experimentation I finally settled on <a href="https://github.com/phiggins42/bloody-jquery-plugins/blob/master/pubsub.js" target="_blank" rel="noopener noreferrer">higgins</a> implementation as it&#x27;s simple and I saw a <a href="http://jsperf.com/pubsubjs-vs-jquery-custom-events/11" target="_blank" rel="noopener noreferrer">JSPerf</a> which demonstrated it as either the fastest or second fastest in class. Up until now my main use for it had been to facilitate loosely coupled GUI interactions. If I wanted one component on the screen to influence anothers behaviour I simply needed to get the first component to publish out the relevant events and the second to subscribe to these self-same events. One of the handy things about publishing out events this way is that with them you can also include data. This data can be useful when driving the response in the subscribers. However, it occurred to me that it would be equally possible to pass an object when publishing an event. <!-- -->*<!-- -->*<u>And the subscribers could enrich that object with data as they saw fit.</u></p><p>*<!-- -->*<!-- --> Now this struck me as a pretty useful approach. It&#x27;s not rock solid secure as it&#x27;s always possible that someone could subscribe to your events and get access to your object as you published out. However, that&#x27;s pretty unlikely to happen accidentally; certainly far less likely than someone else&#x27;s global object clashing with your global object. ## What might this look like in practice?</p><p>So this is what it ended up looking like when I turned my 3 classes into JavaScript files / modules. First BaseReilly.js:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#d6deeb"><span class="token function" style="color:rgb(130, 170, 255)">$</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">  $</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">subscribe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;PubSub.Inheritance.Emulation&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">obj</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    obj</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access maybe-class-name">LastName</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;Reilly&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Next BoyReilly.js:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#d6deeb"><span class="token function" style="color:rgb(130, 170, 255)">$</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">  $</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">subscribe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;PubSub.Inheritance.Emulation&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">obj</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    obj</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access maybe-class-name">Sex</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;It is a manchild&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>And finally JohnReilly.js:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#d6deeb"><span class="token function" style="color:rgb(130, 170, 255)">$</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">  $</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">subscribe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;PubSub.Inheritance.Emulation&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">obj</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">    obj</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access maybe-class-name">FirstName</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;John&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>If the above scripts have been included in a page I can create myself my very own &quot;JohnReilly&quot; in JavaScript like so:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#d6deeb"><span class="token keyword" style="color:rgb(127, 219, 202)">var</span><span class="token plain"> oJohnReilly </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//Empty object</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">$</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">publish</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;PubSub.Inheritance.Emulation&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">oJohnReilly</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//Empty object &quot;published&quot; so it can be enriched by subscribers</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token console class-name" style="color:rgb(255, 203, 139)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token known-class-name class-name" style="color:rgb(255, 203, 139)">JSON</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">stringify</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">oJohnReilly</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//Show me this thing you call &quot;JohnReilly&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>And it will look like this: <img src="/assets/images/JavaScript%2Bversion%2Bof%2BJohnReilly-61bf5d26bcf47e84491e329e64ba9d24.png"></p><p>And it works. Obviously the example I&#x27;ve given above it somewhat naive - in reality my object properties are driven by GUI components rather than hard-coded. But I hope this illustrates the point. This technique allows you to simply share functionality between different JavaScript files and so keep your codebase tight. I certainly wouldn&#x27;t recommend it for all circumstances but when you&#x27;re doing something as simple as building up an object to be used to pass data around (as I am) then it works very well indeed. ## A Final Thought on Script Ordering</p><p>A final thing that maybe worth mentioning is script ordering. The order in which functions are called is driven by the order in which subscriptions are made. In my example I was registering the scripts in this order:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly html"><pre tabindex="0" class="prism-code language-html codeBlock_23N8 thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#d6deeb"><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">script</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">src</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(127, 219, 202)">/Scripts/PubSubInheritanceDemo/BaseReilly.js</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token script"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">script</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">script</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">src</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(127, 219, 202)">/Scripts/PubSubInheritanceDemo/BoyReilly.js</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token script"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">script</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">script</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">src</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(127, 219, 202)">/Scripts/PubSubInheritanceDemo/JohnReilly.js</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">&lt;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">/script&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>So when my event was published out the functions in the above JS files would be called in this order: 1. BaseReilly.js 2. BoyReilly.js 3. JohnReilly.js</p><p>If you were so inclined you could use this to emulate inheritance in behaviour. Eg you could set a property in <code>BaseReilly.js</code> which was subsequently overridden in <code>JohnReilly.js</code> or <code>BoyReilly.js</code> if you so desired. I&#x27;m not doing that myself but it occurred as a possibility. ## PS</p><p>If you&#x27;re interested in learning more about JavaScript stabs at inheritance you could do far worse than look at Bob Inces in depth StackOverflow <a href="http://stackoverflow.com/a/1598077/761388" target="_blank" rel="noopener noreferrer">answer</a>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/inheritance">inheritance</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/javascript">javascript</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/c">c#</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/observer-pattern">observer pattern</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/pubsub">pubsub</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about Using the PubSub / Observer pattern to emulate constructor chaining without cluttering up global scope" href="/2012/03/17/using-pubsub-observer-pattern-to"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/2012/01/30/javascript-getting-to-know-beast">JavaScript - getting to know the beast...</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2012-01-30T00:00:00.000Z" itemprop="datePublished">January 30, 2012</time> · <!-- -->6 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://twitter.com/johnny_reilly" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://blog.johnnyreilly.com/img/profile.jpg" alt="John Reilly"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://twitter.com/johnny_reilly" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">John Reilly</span></a></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>So it&#x27;s 2010 and I&#x27;ve started using jQuery. jQuery is a JavaScript library. This means that I&#x27;m writing JavaScript... Gulp! I should say that at this point in time I <!-- -->*<strong>hated</strong>*<!-- --> JavaScript (I have mentioned this previously). But what I know now is that I barely understood the language at all. All the JavaScript I knew was the result of copying and pasting after I&#x27;d hit &quot;view source&quot;. I don&#x27;t feel too bad about this - not because my ignorance was laudable but because I certainly wasn&#x27;t alone in this. It seems that up until recently hardly anyone knew anything about JavaScript. It puzzles me now that I thought this was okay. I suppose like many people I didn&#x27;t think JavaScript was capable of much and hence felt time spent researching it would be wasted. Just to illustrate where I was then, here is 2009 John&#x27;s idea of some pretty &quot;advanced&quot; JavaScript:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly html"><pre tabindex="0" class="prism-code language-html codeBlock_23N8 thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#d6deeb"><span class="token plain">function GiveMeASum(iNum1, iNum2) { var dteDate = new Date(); var iTotal = iNum1</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">+ iNum2; return &quot;This is your total: &quot; + iTotal + &quot;, at this time: &quot; +</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">dteDate.toString(); }</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">input</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">type</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(127, 219, 202)">text</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">id</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(127, 219, 202)">Number1</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">value</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(127, 219, 202)">4</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">input</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">type</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(127, 219, 202)">text</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">id</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(127, 219, 202)">Number2</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">value</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(127, 219, 202)">6</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">input</span><span class="token tag" style="color:rgb(127, 219, 202)"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token tag" style="color:rgb(127, 219, 202)">  </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">type</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(127, 219, 202)">button</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(127, 219, 202)"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token tag" style="color:rgb(127, 219, 202)">  </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">value</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(127, 219, 202)">Click Me To Add</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(127, 219, 202)"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token tag" style="color:rgb(127, 219, 202)">  </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">onclick</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(127, 219, 202)">alert(GiveMeASum(parseInt(document.getElementById(Number1).value, 10), parseInt(document.getElementById(Number2).value, 10)))</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(127, 219, 202)"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token tag" style="color:rgb(127, 219, 202)"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">/&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>I know - I&#x27;m not to proud of it... Certainly if it was a horse you&#x27;d shoot it. Basically, at that point I knew the following: - JavaScript had functions (but I knew only one way to use them - see above)</p><ul><li>It had some concept of numbers (but I had no idea of the type of numbers I was dealing with; integer / float / decimal / who knows?)</li><li>It had some concept of strings</li><li>It had a date object</li></ul><p>This was about the limit of my knowledge. If I was right, and that&#x27;s all there was to JavaScript then my evaluation of it as utter rubbish would have been accurate. I was wrong. SOOOOOOOOOOOO WRONG! I first realised how wrong I was when I opened up the jQuery source to have a read. Put simply I had <!-- -->*<strong>no</strong>*<!-- --> idea what I was looking at. For a while I wondered if I was actually looking at JavaScript; the code was so different to what I was expecting that for a goodly period I considered jQuery to be some kind of strange black magic; written in a language I did not understand. I was half right. jQuery wasn&#x27;t black magic. But it was written in a language I didn&#x27;t understand; namely JavaScript. :-( Here beginneth the lessons... I started casting around looking for information about JavaScript. Before very long I discovered one <a href="http://www.elijahmanor.com/" target="_blank" rel="noopener noreferrer">Elijah Manor</a> who had helpfully done a number of talks and blog posts directed at C# developers (which I was) about JavaScript. My man! - <a href="http://enterprisejquery.com/2010/10/how-good-c-habits-can-encourage-bad-javascript-habits-part-1/" target="_blank" rel="noopener noreferrer">How good C# habits can encourage bad JavaScript habits part 1</a></p><ul><li><a href="http://enterprisejquery.com/2010/10/how-good-c-habits-can-encourage-bad-javascript-habits-part-2/" target="_blank" rel="noopener noreferrer">How good C# habits can encourage bad JavaScript habits part 2</a></li><li><a href="http://enterprisejquery.com/2010/10/how-good-c-habits-can-encourage-bad-javascript-habits-part-3/" target="_blank" rel="noopener noreferrer">How good C# habits can encourage bad JavaScript habits part 3</a></li><li><a href="https://blogs.msdn.com/b/ukmsdn/archive/2011/06/10/javascript-for-the-c-developer.aspx" target="_blank" rel="noopener noreferrer">Video of Elijah Manor talking through the above material</a></li></ul><p>For me this was all massively helpful. In my development life so far I had only ever dealt with strongly typed, compiled &quot;classical&quot; languages. I had little to no experience of functional, dynamic and loosely typed languages (essentially what JavaScript is). Elijahs work opened up my eyes to some of the massive differences that exist. He also pointed me in the direction of the (never boring) Doug Crockford, author of the best programming book I have ever purchased: <a href="http://www.amazon.co.uk/JavaScript-Good-Parts-Douglas-Crockford/dp/0596517742" target="_blank" rel="noopener noreferrer">JavaScript: The Good Parts</a>. Who could not like a book about JavaScript which starts each chapter with a quote from Shakespeare and still comes in at only a 100 pages? It&#x27;s also worth watching the man in person as he&#x27;s a thoroughly engaging presence. There&#x27;s loads of videos of him out there but this one is pretty good: <a href="http://www.youtube.com/watch?v=v2ifWcnQs6M" target="_blank" rel="noopener noreferrer">Douglas Crockford: The JavaScript Programming Language</a>. I don&#x27;t want to waste your time by attempting to rehash what these guys have done already. I think it&#x27;s always best to go to the source so I&#x27;d advise you to check them out for yourselves. That said it&#x27;s probably worth summarising some of the main points I took away from them (you can find better explanations of all of these through looking at their posts): 1. JavaScript has objects but has no classes. Instead it has (what I still consider to be) the weirdest type of inheritance going: prototypical inheritance. 2. JavaScript has the simplest and loveliest way of creating a new object out there; the &quot;JavaScript Object Literal&quot;. Using this we can simply <code>var myCar = { wheels: 4, colour: &quot;blue&quot; }</code> and ladies and gents we have ourselves a car! (object) 3. In JavaScript functions are <a href="http://en.wikipedia.org/wiki/First-class_function" target="_blank" rel="noopener noreferrer">first class objects</a>. This means functions can be assigned to variables (as easily as you&#x27;d assign a string to a variable) and crucially you can pass them as parameters to a function and pass them back as a return type. Herein lies power! 4. JavaScript has 6 possible values (false, null, undefined, empty strings, 0 and NaN) which it evaluates as false. These are known as the &quot;false-y&quot; values. It&#x27;s a bit weird but on the plus side this can lead to some nicely terse code. 5. To perform comparisons in JavaScript you should avoid == and != and instead use === and !==. Before I discovered this I had been using == and != and then regularly puzzling over some truly odd behaviour. Small though it may sound, this may be the most important discovery of the lot as it was this that lead to me actually <!-- -->*<strong>trusting</strong>*<!-- --> the language. Prior to this I vaguely thought I was picking up on some kind of bug in the JavaScript language which I plain didn&#x27;t understand. (After all, in any sane universe should this really evaluate to true?: <code>0 == &quot;&quot;</code>) 6. Finally JavaScript has function scope rather than block scope. Interestingly it &quot;hoists&quot; variable declaration to the top of each function which can lead to some very surprising behaviour if you don&#x27;t realise what is happening.</p><p>I now realise that JavaScript is a fantastic language because of it&#x27;s flexibility. It is also a deeply flawed language; in part due to it&#x27;s unreasonably forgiving nature (you haven&#x27;t finished your line with a semi-colon; that&#x27;s okay - I can see you meant to so I&#x27;ll stick one in / you haven&#x27;t declared your variable; not a problem I won&#x27;t tell you but I&#x27;ll create a new variable stick it in global scope and off we go etc). It is without question the easiest language with which to create a proper dogs breakfast. To get the best out of JavaScript we need to understand the quirks of the language and we need good patterns. If you&#x27;re interested in getting to grips with it I really advise you to check out the Elijah and Dougs work - it really helped me.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/javascript">javascript</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/c">c#</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/elijah-manor">elijah manor</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/douglas-crockford">douglas crockford</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about JavaScript - getting to know the beast..." href="/2012/01/30/javascript-getting-to-know-beast"><b>Read More</b></a></div></footer></article></main></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Support me</div><ul class="footer__items"><li class="footer__item"><a href="https://www.buymeacoffee.com/qUBm0Wh" target="_blank"><img src="https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png" alt="Buy Me A Coffee" style="height: 60px !important;width: 217px !important;"></a></li><li class="footer__item"><div style="display: flex; align-items: center;"><iframe src="https://github.com/sponsors/johnnyreilly/button" title="Sponsor johnnyreilly" height="35" width="116" style="border: 0;"></iframe><div>&nbsp;on GitHub</div></div></li></ul></div><div class="col footer__col"><div class="footer__title">Feeds</div><ul class="footer__items"><li class="footer__item"><a href="https://blog.johnnyreilly.com/rss.xml" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>RSS<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://blog.johnnyreilly.com/atom.xml" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Atom<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 John Reilly. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.d9f6e547.js"></script>
<script src="/assets/js/main.ea3f11b8.js"></script>
</body>
</html>