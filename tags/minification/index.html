<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="I CAN MAKE THIS WORK RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="I CAN MAKE THIS WORK Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-51754530-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="icon" href="/img/favicon/profile.jpg">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="rgb(37, 194, 160)">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/img/favicon/apple-touch-icon.png"><title data-react-helmet="true">One post tagged with &quot;Minification&quot; | I CAN MAKE THIS WORK</title><meta data-react-helmet="true" property="og:title" content="One post tagged with &quot;Minification&quot; | I CAN MAKE THIS WORK"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://blog.johnnyreilly.com/img/profile.png"><meta data-react-helmet="true" name="twitter:image" content="https://blog.johnnyreilly.com/img/profile.png"><meta data-react-helmet="true" property="og:url" content="https://blog.johnnyreilly.com/tags/minification"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-react-helmet="true" name="robots" content="max-image-preview:large"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://blog.johnnyreilly.com/tags/minification"><link data-react-helmet="true" rel="alternate" href="https://blog.johnnyreilly.com/tags/minification" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://blog.johnnyreilly.com/tags/minification" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.ff16c2af.css">
<link rel="preload" href="/assets/js/runtime~main.89fbb0b4.js" as="script">
<link rel="preload" href="/assets/js/main.14ca547e.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">I CAN MAKE THIS WORK</b></a><a class="navbar__item navbar__link" href="/about">About</a><a class="navbar__item navbar__link" href="/blog-archive">Blog Archive</a><a class="navbar__item navbar__link" href="/talks">Talks</a></div><div class="navbar__items navbar__items--right"><a href="https://polywork.johnnyreilly.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Polywork<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/johnnyreilly" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://twitter.com/johnny_reilly" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">ðŸŒœ</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">ðŸŒž</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-tags-post-list-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_2ahu thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_2hhb margin-bottom--md">Recent posts</div><ul class="sidebarItemList_2xAf"><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/2021/12/05/azure-static-web-app-deploy-previews-with-azure-devops">Azure Static Web App Deploy Previews with Azure DevOps</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/2021/11/22/typescript-vs-jsdoc-javascript">TypeScript vs JSDoc JavaScript</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/2021/11/18/azure-standard-tests-with-bicep">Azure standard availability tests with Bicep</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/2021/10/31/nswag-generated-c-sharp-client-property-name-clash">NSwag generated C# client: Open API property name clashes and decimal types rather than double</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/2021/10/18/docusaurus-meta-tags-and-google-discover">Docusaurus, meta tags and Google Discover</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><header class="margin-bottom--xl"><h1>One post tagged with &quot;Minification&quot;</h1><a href="/tags">View All Tags</a></header><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/2012/10/05/using-web-optimization-with-mvc-3">Using Web Optimization with MVC 3</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2012-10-05T00:00:00.000Z" itemprop="datePublished">October 5, 2012</time> Â· <!-- -->4 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://twitter.com/johnny_reilly" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://blog.johnnyreilly.com/img/profile.jpg" alt="John Reilly"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://twitter.com/johnny_reilly" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">John Reilly</span></a></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>A while ago I <a href="http://icanmakethiswork.blogspot.com/2012/06/how-im-structuring-my-javascript-in-web.html#WebOptimization" target="_blank" rel="noopener noreferrer">wrote</a> about optimally serving up JavaScript in web applications. I mentioned that Microsoft had come up with a NuGet package called <a href="http://nuget.org/packages/Microsoft.AspNet.Web.Optimization" target="_blank" rel="noopener noreferrer">Microsoft ASP.NET Web Optimization</a> which could help with that by minifying and bundling CSS and JavaScript. At the time I was wondering if I would be able to to use this package with pre-existing MVC 3 projects (given that the package had been released together with MVC 4). Happily it turns out you can. But it&#x27;s not quite as straightforward as I might have liked so I&#x27;ve documented how to get going with this here...</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="getting-the-basics-in-place">Getting the Basics in Place<a aria-hidden="true" class="hash-link" href="#getting-the-basics-in-place" title="Direct link to heading">â€‹</a></h2><p>To keep it simple I&#x27;m going to go through taking a &quot;vanilla&quot; MVC 3 app and enhancing it to work with Web Optimization. To start, follow these basic steps:</p><ol><li>Open Visual Studio (bet you didn&#x27;t see that coming!)</li><li>Create a new MVC 3 application (I called mine &quot;WebOptimizationWithMvc3&quot; to demonstrate my imaginative flair). It doesn&#x27;t really matter which sort of MVC 3 project you create - I chose an Intranet application but really that&#x27;s by the by.</li><li>Update pre-existing NuGet packages</li><li>At the NuGet console type: &quot;<code>Install-Package Microsoft.AspNet.Web.Optimization</code>&quot;</li></ol><p>Whilst the NuGet package adds the necessary references to your MVC 3 project it doesn&#x27;t add the corresponding namespaces to the web.configs. To fix this manually add the following child XML element to the <code>&amp;lt;namespaces&amp;gt;</code> element in your root and Views web.config files:</p><p><code>&amp;lt;add namespace=&quot;System.Web.Optimization&quot; /&amp;gt;</code></p><p>This gives you access to <code>Scripts</code> and <code>Styles</code> in your views without needing the fully qualified namespace. For reasons best known to Microsoft I had to close down and restart Visual Studio before intellisense started working. You may need to do likewise.</p><p>Next up we want to get some JavaScript / CSS bundles in place. To do this, create a folder in the root of your project called &quot;App_Start&quot;. There&#x27;s nothing magical about this to my knowledge; this is just a convention that&#x27;s been adopted to store all the bits of startup in one place and avoid clutterage. (I think this grew out of Nuget; see <a href="http://blog.davidebbo.com/2011/02/appstart-folder-convention-for-nuget.html" target="_blank" rel="noopener noreferrer">David Ebbo talking about this here</a>.) Inside your new folder you should add a new class called <code>BundleConfig.cs</code> which looks like this:</p><script src="https://gist.github.com/3839486.js?file=BundleConfig.cs"></script><p>The above is what you get when you create a new MVC 4 project (as it includes Web Optimization out of the box). All it does is create some JavaScript and CSS bundles relating to jQuery, jQuery UI, jQuery Validate, Modernizr and the standard site CSS. Nothing radical here but this example should give you an idea of how bundling can be configured and used. To make use of <code>BundleConfig.cs</code> you should modify your <code>Global.asax.cs</code> so it looks like this:</p><script src="https://gist.github.com/3839486.js?file=Global.asax.cs"></script><p>Once you&#x27;ve done this you&#x27;re ready to start using Web Optimization in your MVC 3 application.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="switching-over-_layoutcshtml-to-use-web-optimization">Switching over <!-- -->_<!-- -->Layout.cshtml to use Web Optimization<a aria-hidden="true" class="hash-link" href="#switching-over-_layoutcshtml-to-use-web-optimization" title="Direct link to heading">â€‹</a></h2><p>With a &quot;vanilla&quot; MVC 3 app the only use of CSS and JavaScript files is found in <code>_Layout.cshtml</code>. To switch over to using Web Optimization you should replace the existing <code>_Layout.cshtml</code> with this: (you&#x27;ll see that the few differences that there are between the 2 are solely around the replacement of link / script tags with references to <code>Scripts</code> and <code>Styles</code> instead)</p><script src="https://gist.github.com/3839486.js?file=_Layout.cshtml"></script><p>Do note that in the above <code>Scripts.Render</code> call we&#x27;re rendering out 3 bundles; jQuery, jQuery UI and jQuery Validate. We&#x27;re not using any of these in <code>_Layout.cshtml</code> but rendering these (and their associated link tags) gives us a chance to demonstrate that everything is working as expected.</p><p>In your root web.config file make sure that the following tag is in place: <code>&amp;lt;compilation debug=&quot;&lt;b&gt;true&lt;/b&gt;&quot; targetFramework=&quot;4.0&quot;&amp;gt;</code>. Then run, the generated HTML should look something like this:</p><script src="https://gist.github.com/3839486.js?file=debug  true"></script><p>This demonstrates that when the application has debug set to true you see the full scripts / links being rendered out as you would hope (to make your debugging less painful).</p><p>Now go back to your root <code>web.config</code> file and chance the debug tag to false: <code>&amp;lt;compilation debug=&quot;&lt;b&gt;false&lt;/b&gt;&quot; targetFramework=&quot;4.0&quot;&amp;gt;</code>. This time when you run, the generated HTML should look something like this:</p><script src="https://gist.github.com/3839486.js?file=debug  false"></script><p>This time you can see that in non-debug mode (ie how it would run in Production) minified bundles of scripts and css files are being served up instead of the raw files. And that&#x27;s it; done.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/asp-net">asp.net</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/bundling">Bundling</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/mvc-3">MVC 3</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/web-optimization">Web Optimization</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/minification">Minification</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about Using Web Optimization with MVC 3" href="/2012/10/05/using-web-optimization-with-mvc-3"><b>Read More</b></a></div></footer></article></main></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Support me</div><ul class="footer__items"><li class="footer__item"><a href="https://www.buymeacoffee.com/qUBm0Wh" target="_blank"><img src="https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png" alt="Buy Me A Coffee" style="height: 60px !important;width: 217px !important;"></a></li><li class="footer__item"><div style="display: flex; align-items: center;"><iframe src="https://github.com/sponsors/johnnyreilly/button" title="Sponsor johnnyreilly" height="35" width="116" style="border: 0;"></iframe><div>&nbsp;on GitHub</div></div></li></ul></div><div class="col footer__col"><div class="footer__title">Feeds</div><ul class="footer__items"><li class="footer__item"><a href="https://blog.johnnyreilly.com/rss.xml" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>RSS<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://blog.johnnyreilly.com/atom.xml" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Atom<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 John Reilly. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.89fbb0b4.js"></script>
<script src="/assets/js/main.14ca547e.js"></script>
</body>
</html>