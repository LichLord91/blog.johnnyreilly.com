<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="I CAN MAKE THIS WORK RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="I CAN MAKE THIS WORK Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-51754530-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="icon" href="/img/favicon/profile.jpg">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="rgb(37, 194, 160)">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/img/favicon/apple-touch-icon.png"><title data-react-helmet="true">4 posts tagged with &quot;cassette&quot; | I CAN MAKE THIS WORK</title><meta data-react-helmet="true" property="og:title" content="4 posts tagged with &quot;cassette&quot; | I CAN MAKE THIS WORK"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://blog.johnnyreilly.com/img/profile.png"><meta data-react-helmet="true" name="twitter:image" content="https://blog.johnnyreilly.com/img/profile.png"><meta data-react-helmet="true" property="og:url" content="https://blog.johnnyreilly.com/tags/cassette"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-react-helmet="true" name="robots" content="max-image-preview:large"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://blog.johnnyreilly.com/tags/cassette"><link data-react-helmet="true" rel="alternate" href="https://blog.johnnyreilly.com/tags/cassette" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://blog.johnnyreilly.com/tags/cassette" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.ff16c2af.css">
<link rel="preload" href="/assets/js/runtime~main.89fbb0b4.js" as="script">
<link rel="preload" href="/assets/js/main.14ca547e.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/profile.jpg" alt="I CAN MAKE THIS WORK" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">I CAN MAKE THIS WORK</b></a><a class="navbar__item navbar__link" href="/about">About</a><a class="navbar__item navbar__link" href="/blog-archive">Blog Archive</a><a class="navbar__item navbar__link" href="/talks">Talks</a></div><div class="navbar__items navbar__items--right"><a href="https://polywork.johnnyreilly.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Polywork<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/johnnyreilly" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://twitter.com/johnny_reilly" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">ðŸŒœ</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">ðŸŒž</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-tags-post-list-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_2ahu thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_2hhb margin-bottom--md">Recent posts</div><ul class="sidebarItemList_2xAf"><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/2021/12/05/azure-static-web-app-deploy-previews-with-azure-devops">Azure Static Web App Deploy Previews with Azure DevOps</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/2021/11/22/typescript-vs-jsdoc-javascript">TypeScript vs JSDoc JavaScript</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/2021/11/18/azure-standard-tests-with-bicep">Azure standard availability tests with Bicep</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/2021/10/31/nswag-generated-c-sharp-client-property-name-clash">NSwag generated C# client: Open API property name clashes and decimal types rather than double</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/2021/10/18/docusaurus-meta-tags-and-google-discover">Docusaurus, meta tags and Google Discover</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><header class="margin-bottom--xl"><h1>4 posts tagged with &quot;cassette&quot;</h1><a href="/tags">View All Tags</a></header><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/2013/07/06/how-im-using-cassette-part-3-typescript">How I&#x27;m Using Cassette part 3:Cassette and TypeScript Integration</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2013-07-06T00:00:00.000Z" itemprop="datePublished">July 6, 2013</time> Â· <!-- -->6 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://twitter.com/johnny_reilly" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://blog.johnnyreilly.com/img/profile.jpg" alt="John Reilly"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://twitter.com/johnny_reilly" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">John Reilly</span></a></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>The modern web is JavaScript. There&#x27;s no two ways about it. HTML 5 has new CSS, new HTML but the most important aspect of it from an application development point of view is JavaScript. It&#x27;s the engine. Without it HTML 5 wouldn&#x27;t be the exciting application platform that it is. Half the posts on <a href="https://news.ycombinator.com/" target="_blank" rel="noopener noreferrer">Hacker News</a> would vanish.</p><p>It&#x27;s easy to break a JavaScript application. One false keypress and you can mysteriously turn a fully functioning app into toast. And not know why. There&#x27;s tools you can use to help yourself - <a href="http://icanmakethiswork.blogspot.co.uk/2012/04/jshint-customising-your-hurt-feelings.html" target="_blank" rel="noopener noreferrer">JSHint / JSLint</a> but whilst these make error detection a little easier it remains very easy to shoot yourself in the foot with JavaScript. Because of this I&#x27;ve come to really rather love <a href="http://www.typescriptlang.org/" target="_blank" rel="noopener noreferrer">TypeScript</a>. If you didn&#x27;t already know, TypeScript can be summed up as JavaScript with optional static typing. It&#x27;s a <strong><em>superset</em></strong> of JavaScript - JavaScript with go-faster stripes. When run through the compiler TypeScript is <a href="https://en.wikipedia.org/wiki/Source-to-source_compiler" target="_blank" rel="noopener noreferrer">transpiled</a> into JavaScript. And importantly, if you have bugs in your code, the compiler should catch them at this point and let you know.</p><p>Now very few of us are working on greenfield applications. Most of us have existing applications to maintain and support. Happily, TypeScript fits very well with this purely because TypeScript is a superset of JavaScript. That is to say: all JavaScript is valid TypeScript in the same way that all CSS is valid <a href="http://lesscss.org/" target="_blank" rel="noopener noreferrer">LESS</a>. This means that you can take an existing <code>.js</code> file, rename it to have a <code>.ts</code> suffix, run the TypeScript compiler over it and out will pop your JavaScript file just as it was before. You&#x27;re then free to enrich your TypeScript file with the relevant type annotations at your own pace. Increasing the robustness of your codebase is a choice left to you.</p><p>The project I am working on has recently started to incorporate TypeScript. It&#x27;s an ASP.Net MVC 4 application which makes use of <a href="http://knockoutjs.com/" target="_blank" rel="noopener noreferrer">Knockout</a>. The reason we started to incorporate TypeScript is because certain parts of the app, particularly the Knockout parts, were becoming more complex. This complexity wasn&#x27;t really an issue when we were writing the relevant JavaScript. However, when it came to refactoring and handing files from one team member to another we realised it was very easy to introduce bugs into the codebase, particularly around the JavaScript. Hence TypeScript.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="cassette-and-typescript">Cassette and TypeScript<a aria-hidden="true" class="hash-link" href="#cassette-and-typescript" title="Direct link to heading">â€‹</a></h2><p>Enough of the pre-amble. The project was making use of Cassette for serving up its CSS and JavaScript. Because Cassette rocks. One of the reasons we use it is that we&#x27;re making extensive use of <a href="http://icanmakethiswork.blogspot.co.uk/2013/06/how-im-using-cassette-part-2.html" target="_blank" rel="noopener noreferrer">Cassette&#x27;s ability to serve scripts in dependency order</a>. So if we were to move to using TypeScript it was important that TypeScript and Cassette would play well together.</p><p>I&#x27;m happy to report that Cassettes and TypeScript do work well together, but there are a few things that you need to get up and running. Or, to be a little clearer, if you want to make use of Cassette&#x27;s in-file Asset Referencing then you&#x27;ll need to follow these steps. If you don&#x27;t need Asset Referencing then you&#x27;ll be fine using Cassette with TypeScript generated JavaScript as is <!-- -->*<strong>provided</strong>*<!-- --> you ensure the TypeScript compiler is not preserving comments in the generated JavaScript.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="the-fly-in-the-ointment-asset-references">The Fly in the Ointment: Asset References<a aria-hidden="true" class="hash-link" href="#the-fly-in-the-ointment-asset-references" title="Direct link to heading">â€‹</a></h2><p>TypeScript is designed to allow you to break up your application into modules. However, the referencing mechanism which allows you to reference one TypeScript file / module from another is exactly the same as the existing Visual Studio XML reference comments mechanism that was originally introduced to drive JavaScript Intellisense in Visual Studio. To quote the <a href="http://www.typescriptlang.org/Content/TypeScript%20Language%20Specification.pdf" target="_blank" rel="noopener noreferrer">TypeScript spec</a>:</p><ul><li><em>A comment of the form /// <reference path="â€¦"></reference> adds a dependency on the source file specified in the path argument. The path is resolved relative to the directory of the containing source file.</em></li><li><em>An external import declaration that specifies a relative external module name (section 11.2.1) resolves the name relative to the directory of the containing source file. If a source file with the resulting path and file extension â€˜.tsâ€™ exists, that file is added as a dependency. Otherwise, if a source file with the resulting path and file extension â€˜.d.tsâ€™ exists, that file is added as a dependency.</em></li></ul><p>The problem is that <a href="http://getcassette.net/documentation/v1/AssetReferences" target="_blank" rel="noopener noreferrer">Cassette <!-- -->*<strong>also</strong>*<!-- --> supports Visual Studio XML reference comments to drive Asset References</a>. The upshot of this is, that Cassette will parse the <code>/// &amp;lt;reference path=&quot;*.ts&quot;/&amp;gt;</code>s and will attempt to serve up the TypeScript files in the browser... Calamity!</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="pulling-the-fly-from-the-ointment">Pulling the Fly from the Ointment<a aria-hidden="true" class="hash-link" href="#pulling-the-fly-from-the-ointment" title="Direct link to heading">â€‹</a></h2><p>Again I&#x27;m going to take the demo from last time (<a href="https://github.com/johnnyreilly/CassetteDemo/tree/References" target="_blank" rel="noopener noreferrer">the References branch of my CassetteDemo project</a>) and build on top of it. First of all, we need to update the Cassette package. This is because to get Cassette working with TypeScript you need to be running at least Cassette 2.1. So let&#x27;s let NuGet do it&#x27;s thing:</p><p><code>Update-Package Cassette.Aspnet</code></p><p>And whilst we&#x27;re at it let&#x27;s grab the jQuery TypeScript typings - we&#x27;ll need them later:</p><p><code>Install-Package jquery.TypeScript.DefinitelyTyped</code></p><p>Now we need to add a couple of classes to the project. First of all this:</p><script src="https://gist.github.com/johnnyreilly/5934706.js?file=ParseJavaScriptNotTypeScriptReferences.cs"></script><p>Which subclasses <code>ParseJavaScriptReferences</code> and ensures TypeScript files are excluded when JavaScript references are being parsed. And to make sure that Cassette makes use of <code>ParseJavaScriptNotTypeScriptReferences</code> in place of <code>ParseJavaScriptReferences</code> we need this:</p><script src="https://gist.github.com/johnnyreilly/5934706.js?file=InsertIntoPipelineParseJavaScriptNotTypeScriptReferences.cs"></script><p>Now we&#x27;re in a position to use TypeScript with Cassette. To demonstrate this let&#x27;s take the <code>Index.js</code> and rename it to <code>Index.ts</code>. And now it&#x27;s TypeScript. However before it can compile it needs to know what jQuery is - so we drag in the jQuery typings from <a href="http://github.com/borisyankov/DefinitelyTyped" target="_blank" rel="noopener noreferrer">Definitely Typed</a>. And now it can compile from this:</p><script src="https://gist.github.com/johnnyreilly/5934706.js?file=Index.ts"></script><p>To this: (Please note that I get the TypeScript compiler to preserve my comments in order that I can continue to use Cassettes Asset Referencing)</p><script src="https://gist.github.com/johnnyreilly/5934706.js?file=Index.js"></script><p>As you can see the output JavaScript has both the TypeScript and the Cassette references in place. However thanks to <code>ParseJavaScriptNotTypeScriptReferences</code> those TypeScript references will be ignored by Cassette.</p><p>So that&#x27;s it - we&#x27;re home free. Before I finish off I&#x27;d like to say thanks to Cassette&#x27;s <a href="http://twitter.com/andrewdavey" target="_blank" rel="noopener noreferrer">Andrew Davey</a> who <a href="https://groups.google.com/forum/?fromgroups=#!topic/cassette/SM3Rxh48D7Q" target="_blank" rel="noopener noreferrer">set me on the right path</a> when trying to work out how to do this. A thousand thank yous Andrew!</p><p>And finally, again as last time you can see what I&#x27;ve done in this post by just looking at the repository on <a href="https://github.com/johnnyreilly/CassetteDemo/tree/TypeScript" target="_blank" rel="noopener noreferrer">GitHub</a>. The changes I made are on the TypeScript branch of that particular repository.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/andrew-davey">Andrew Davey</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/type-script">TypeScript</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/javascript">javascript</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/cassette">cassette</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/web-essentials">Web Essentials</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about How I&#x27;m Using Cassette part 3:Cassette and TypeScript Integration" href="/2013/07/06/how-im-using-cassette-part-3-typescript"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/2013/06/06/how-im-using-cassette-part-2">How I&#x27;m Using Cassette part 2:Get Cassette to Serve Scripts in Dependency Order</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2013-06-06T00:00:00.000Z" itemprop="datePublished">June 6, 2013</time> Â· <!-- -->8 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://twitter.com/johnny_reilly" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://blog.johnnyreilly.com/img/profile.jpg" alt="John Reilly"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://twitter.com/johnny_reilly" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">John Reilly</span></a></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p><a href="http://icanmakethiswork.blogspot.co.uk/2013/05/how-im-using-cassette.html" target="_blank" rel="noopener noreferrer">Last time</a> I wrote about Cassette I was talking about how to generally get up and running. How to use Cassette within an ASP.Net MVC project. What I want to write about now is (in my eyes) the most useful feature of Cassette by a country mile. This is Cassettes ability to ensure scripts are served in dependency order.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="why-does-this-matter">Why does this matter?<a aria-hidden="true" class="hash-link" href="#why-does-this-matter" title="Direct link to heading">â€‹</a></h2><p>You might well ask. If we go back 10 years or so then really this wasn&#x27;t a problem. No-one was doing a great deal with JavaScript. And if they did anything it tended to be code snippets in amongst the HTML; nothing adventurous. But unless you&#x27;ve had your head in the sand for the last 3 years then you will have clearly noticed that JavaScript is in rude health and being used for all kinds of things you&#x27;d never have imagined. In fact some would have it that it&#x27;s the <a href="http://www.hanselman.com/blog/JavaScriptisAssemblyLanguagefortheWebPart2MadnessorjustInsanity.aspx" target="_blank" rel="noopener noreferrer">assembly language of the web</a>.</p><p>For my part, I&#x27;ve been doing more and more with JavaScript. And as I do more and more with it I seek to modularise my code; (<a href="http://en.wikipedia.org/wiki/Separation_of_concerns" target="_blank" rel="noopener noreferrer">like any good developer would</a>) breaking it up into discrete areas of functionality. I aim to only serve up the JavaScript that I need on a given page. And that would be all well and good but for one of the languages shortcomings. Modules. JavaScript doesn&#x27;t yet have a good module loading story to tell. (Apparently one&#x27;s coming in <a href="http://wiki.ecmascript.org/doku.php?id=harmony:modules" target="_blank" rel="noopener noreferrer">EcmaScript 6</a>). (I don&#x27;t want to get diverted into this topic as it&#x27;s a big area. But if you&#x27;re interested then you can read up a little on different approaches being used <a href="http://requirejs.org/docs/whyamd.html#today" target="_blank" rel="noopener noreferrer">here</a>. The ongoing contest between RequireJS and CommonJS frankly makes me want to keep my distance for now.)</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="it-depends">It Depends<a aria-hidden="true" class="hash-link" href="#it-depends" title="Direct link to heading">â€‹</a></h2><p>Back to my point, JavaScripts native handling of script dependencies is non-existent. It&#x27;s real &quot;here be dragons&quot; territory. If you serve up, for example, Slave.js that depends on things set up in Master.js before you&#x27;ve actually served up Master.js, well it&#x27;s not a delightful debugging experience. The errors tend be obscure and it&#x27;s not always obvious what the correct ordering should be.</p><p>Naturally this creates something of a headache around my own JavaScript modules. A certain amount of jiggery-pokery is required to ensure that scripts are served in the correct order so that they run as expected. And as your application becomes more complicated / modular, the number of problems around this area increase exponentially. It&#x27;s <strong>really</strong> tedious. I don&#x27;t want to be thinking about managing that as I&#x27;m developing - I want to be focused on solving the problem at hand.</p><p>In short, what I want to do is reference a script file somewhere in my server-side pipeline. I could be in a view, a layout, a controller, a partial view, a HTML helper... - I just want to know that that script is going to turn up at the client in the right place in the HTML so it works. Always. And I don&#x27;t want to have to think about it any further than that.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="enter-cassette-riding-a-white-horse">Enter Cassette, riding a white horse<a aria-hidden="true" class="hash-link" href="#enter-cassette-riding-a-white-horse" title="Direct link to heading">â€‹</a></h2><p>And this is where Cassette takes the pain away. To quote the documentation:</p><blockquote><p>&quot;<em>Some assets must be included in a page before others. For example, your code may use jQuery, so the jQuery script must be included first. Cassette will sort all assets based on references they declare.</em>&quot;</p></blockquote><p>Just the ticket!</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="declaring-references-server-side">Declaring References Server-Side<a aria-hidden="true" class="hash-link" href="#declaring-references-server-side" title="Direct link to heading">â€‹</a></h2><p>What does this look like in reality? Let&#x27;s build on what I did last time to demonstrate how I make use of Asset References to ensure my scripts turn up in the order I require.</p><p>In my <code>_Layout.cshtml</code> file I&#x27;m going to remove the following reference from the head of the file:</p><p><code>Bundles.Reference(&quot;~/bundles/core&quot;);</code></p><p>I&#x27;m pulling this out of my layout page because it&#x27;s presence means that <strong>every</strong> page MVC serves up is also serving up jQuery and jQuery UI (which is what <code>~/bundles/core</code> is). If a page doesn&#x27;t actually make use of jQuery and / or jQuery UI then there&#x27;s no point in doing this.</p><p>&quot;<em>But wait!</em>&quot;, I hear you cry, &quot;<em>Haven&#x27;t you just caused a bug with your reckless action? I distinctly recall that the <code>Login.cshtml</code> page has the following code in place:</em>&quot;</p><p><code>Bundles.Reference(&quot;~/bundles/validate&quot;);</code></p><p>&quot;<em>And now with your foolhardy, nay, reckless attitude to the <code>~/bundles/core</code> bundle you&#x27;ve broken your Login screen. How can jQuery Validation be expected to work if there&#x27;s no jQuery there to extend?</em>&quot;</p><p>Well, I understand your concerns but really you needn&#x27;t worry - Cassette&#x27;s got my back. Look closely at the code below:</p><script src="https://gist.github.com/johnnyreilly/5693071.js?file=ReferencesValidateDependesOnCoreCassetteConfiguration.cs"></script><p>See it? The <code>~/bundles/validate</code> bundle declares a reference to the <code>~/bundles/core</code> bundle. The upshot of this is, that if you tell Cassette to reference <code>~/bundles/validate</code> it will ensure that before it renders that bundle it first renders any bundles that bundle depends on (in this case the <code>~/bundles/core</code> bundle).</p><p>This is a very simple demonstration of the feature but I can&#x27;t underplay just how useful I find this.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="declaring-references-in-your-javascript-itself">Declaring References in your JavaScript itself<a aria-hidden="true" class="hash-link" href="#declaring-references-in-your-javascript-itself" title="Direct link to heading">â€‹</a></h2><p>And the good news doesn&#x27;t stop there. Let&#x27;s say you <strong>don&#x27;t</strong> want to maintain your references in a separate file. You&#x27;d rather declare references inside your JavaScript files themselves. Well - you can. Cassette caters for this through the usage of <a href="http://getcassette.net/documentation/v1/AssetReferences" target="_blank" rel="noopener noreferrer">Asset References</a>.</p><p>Let&#x27;s demo this. First of all add the following file at this location in the project: <code>~/Scripts/Views/Home/Index.js</code></p><script src="https://gist.github.com/johnnyreilly/5693071.js?file=Index.js"></script><p>The eagle-eyed amongst you will have noticed</p><ol><li>I&#x27;m mirroring the MVC folder structure inside the Scripts directory. (There&#x27;s nothing special about that by the way - it&#x27;s just a file structure I&#x27;ve come to find useful. It&#x27;s very easy to find the script associated with a View if the scripts share the same organisational approach as the Views.).</li><li>The purpose of the script is very simple, it fades out the main body of the screen, re-writes the HTML in that tag and then fades back in. It&#x27;s purpose is just to do something that is obvious to the user - so they can see the evidence of JavaScript executing.</li><li>Lastly and most importantly, do you notice that <code>// @reference ~/bundles/core</code> is the first line of the file? This is our script reference. It&#x27;s this that Cassette will be reading to pick up references.</li></ol><p>To make sure Cassette is picking up our brand new file let&#x27;s take a look at <code>CassetteConfiguration.cs</code> and uncomment the line of code below:</p><p><code>bundles.AddPerIndividualFile&lt;scriptbundle&gt;(&quot;~/Scripts/Views&quot;);&lt;/scriptbundle&gt;</code></p><p>With this in place Cassette will render out a bundle for each script in the Views subdirectory. Let&#x27;s see if it works. Add the following reference to our new JavaScript file in <code>~/Views/Home/Index.cshtml</code>:</p><p><code>Bundles.Reference(&quot;~/Scripts/Views/Home/Index.js&quot;);</code></p><p>If you browse to the home page of the application this is what you should now see:</p><p><img src="https://2.bp.blogspot.com/-tGZTEhhkGz8/Ua7xlgl3n5I/AAAAAAAAAcs/miNZsysrJeY/s320/Index.js.png"></p><p>What this means is, <code>Index.js</code> was served up by Cassette. And more importantly before <code>Index.js</code> was served the referenced <code>~/bundles/core</code> was served too.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="avoiding-the-gotcha">Avoiding the Gotcha<a aria-hidden="true" class="hash-link" href="#avoiding-the-gotcha" title="Direct link to heading">â€‹</a></h2><p>There is a gotcha which I&#x27;ve discovered whilst using Cassette&#x27;s Asset References. Strictly speaking it&#x27;s a Visual Studio gotcha rather than a Cassette gotcha. It concerns Cassette&#x27;s support for Visual Studio XML style reference comments. In the example above I could have written this:</p><p><code>/// &amp;lt;reference path=&quot;~/bundles/core&quot; /&amp;gt;</code></p><p>Instead of this:</p><p><code>// @reference ~/bundles/core</code></p><p>It would fulfil exactly the same purpose and would work identically. But there&#x27;s a problem. Using Visual Studio XML style reference comments to refer to Cassette bundles appears to trash the Visual Studios JavaScript Intellisense. You&#x27;ll lose the Intellisense that&#x27;s driven by <code>~/Scripts/_references.js</code> in VS 2012. So if you value your Intellisense (and I do) my advice is to stick to using the standard Cassette references style instead.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="go-forth-and-reference">Go Forth and Reference<a aria-hidden="true" class="hash-link" href="#go-forth-and-reference" title="Direct link to heading">â€‹</a></h2><p>There is also support in Cassette for CSS referencing (as well as other types of referencing relating to LESS and even CoffeeScript). I haven&#x27;t made use of CSS referencing myself as, in stark contrast to my JS, my CSS is generally one bundle of styles which I&#x27;m happy to be rendered on each page. But it&#x27;s nice to know the option is there if I wanted it.</p><p>Finally, as last time you can see what I&#x27;ve done in this post by just looking at the repository on <a href="https://github.com/johnnyreilly/CassetteDemo/tree/References" target="_blank" rel="noopener noreferrer">GitHub</a>. The changes I made are on the References branch of that particular repository.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/script-references">script references</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/require-js">RequireJS</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/cassette">cassette</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about How I&#x27;m Using Cassette part 2:Get Cassette to Serve Scripts in Dependency Order" href="/2013/06/06/how-im-using-cassette-part-2"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/2013/05/04/how-im-using-cassette">How I&#x27;m Using Cassette part 1:Getting Up and Running</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2013-05-04T00:00:00.000Z" itemprop="datePublished">May 4, 2013</time> Â· <!-- -->6 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://twitter.com/johnny_reilly" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://blog.johnnyreilly.com/img/profile.jpg" alt="John Reilly"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://twitter.com/johnny_reilly" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">John Reilly</span></a></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_31ik" id="backing-into-the-light">Backing into the light<a aria-hidden="true" class="hash-link" href="#backing-into-the-light" title="Direct link to heading">â€‹</a></h2><p>For a while now, I&#x27;ve been seeking a bulletproof way to handle the following scenarios... all at the same time in the context of an ASP.Net MVC application:</p><ol><li>How to serve full-fat JavaScript in debug mode and minified in release mode</li><li>When debugging, ensure that the full-fat JS being served is definitely the latest version; and <!-- -->*<strong>not</strong>*<!-- --> from the cache. (The time I&#x27;ve wasted due to <a href="http://en.wikipedia.org/wiki/List_of_HTTP_status_codes#304" target="_blank" rel="noopener noreferrer">304&#x27;s</a>...)</li><li>How to add Javascript assets that need to be served up from any point in an ASP.Net MVC application (including views, layouts, partial views... even controllers if so desired) whilst preventing duplicate scripts from being served.</li><li>How to ensure that Javascript files are served up last to any web page to ensure a speedy feel to users (don&#x27;t want JS blocking rendering).</li><li>And last but certainly not least the need to load Javascript files in dependency order. If <code>myView.js</code> depends on jQuery then clearly <code>jQuery-latest.js</code> needs to be served before <code>myView.js</code>.</li></ol><p>Now the best, most comprehensive and solid looking solution to this problem has for some time seemed to me to be <a href="http://aboutcode.net/" target="_blank" rel="noopener noreferrer">Andrew Davey&#x27;s</a><a href="http://getcassette.net/" target="_blank" rel="noopener noreferrer">Cassette</a>. This addresses all my issues in one way or another, as well as bringing in a raft of other features (support for Coffeescript etc).</p><p>However, up until now I&#x27;ve slightly shied away from using Cassette as I was under the impression it had a large number of dependencies. That doesn&#x27;t appear to be the case at all. I also had some vague notion that I could quite simply build my own solution to these problems making use of Microsoft&#x27;s <a href="http://nuget.org/packages/Microsoft.AspNet.Web.Optimization/1.0.0" target="_blank" rel="noopener noreferrer">Web Optimization</a> which nicely handles my #1 problem above. However, looking again at the documentation Cassette was promising to handle scenarios #1 - #5 without breaking sweat. How could I ignore that? I figured I should do the sensible thing and take another look at it. And, lo and behold, when I started evaluating it again it seemed to be just what I needed.</p><p>With the minumum of fuss I was able to get an ASP.Net MVC 4 solution up and running, integrated with Cassette, which dealt with all my scenarios very nicely indeed. I thought it might be good to write this up over a short series of posts and share what my finished code looks like. If you follow the steps I go through below it&#x27;ll get you started using Cassette. Or you could skip to the end of this post and look at the repo on GitHub. Here we go...</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="adding-cassette-to-a-raw-mvc-4-project">Adding Cassette to a raw MVC 4 project<a aria-hidden="true" class="hash-link" href="#adding-cassette-to-a-raw-mvc-4-project" title="Direct link to heading">â€‹</a></h2><p>Fire up Visual Studio and create a new MVC 4 project (I used the internet template to have some content in place).</p><p>Go to the Package Manager Console and key in &quot;<code>Install-Package Cassette.Aspnet</code>&quot;. Cassette will install itself.</p><p>Now you&#x27;ve got Cassette in place you may as well pull out usage of Web Optimization as you&#x27;re not going to need it any more.Be ruthless, delete App_Start/BundleConfig.cs and delete the line of code that references it in Global.asax.cs. If you take the time to run the app now you&#x27;ll see you&#x27;ve miraculously lost your CSS and your JavaScript. The code referencing it is still in place but there&#x27;s nothing for it to serve up. Don&#x27;t worry about that - we&#x27;re going to come back and Cassette-ify things later on...</p><p>You&#x27;ll also notice you now have a CassetteConfiguration.cs file in your project. Open it. Replace the contents with this (I&#x27;ve just commented out the default code and implemented my own CSS and Script bundles based on what is available in the default template of an MVC 4 app):</p><script src="https://gist.github.com/johnnyreilly/5393608.js?file=CassetteConfiguration.cs"></script><p>In the script above I&#x27;ve created 4 bundles, 1 stylesheet bundle and 3 JavaScript bundles - each of these is roughly equivalent to Web Optimization bundles that are part of the MVC 4 template:</p><dl><dt>~/bundles/css</dt><dd>Our site CSS - this includes both our own CSS and the jQuery UI CSS as well. This is the rough equivalent of the Web Optimization bundles <em>~/Content/css</em> and <em>~/Content/themes/base/css</em> brought together.</dd><dt>~/bundles/head</dt><dd>What scripts we want served in the head tag - Modernizr basically. Do note the setting of the <em>PageLocation</em> property - the purpose of this will become apparent later. This is the direct equivalent of the Web Optimization bundle: <em>~/bundles/modernizr</em>.</dd><dt>~/bundles/core</dt><dd>The scripts we want served on every page. For this example project I&#x27;ve picked jQuery and jQuery UI. This is the rough equivalent of the Web Optimization bundles <em>~/bundles/jquery</em> and <em>~/bundles/jqueryui</em> brought together.</dd><dt>~/bundles/validate</dt><dd>The validation scripts (that are dependent on the core scripts). This is the rough equivalent of the Web Optimization bundle: <em>~/bundles/jqueryval</em>.</dd></dl><p>At this point we&#x27;ve set up Cassette in our project - although we&#x27;re not making use of it yet. If you want to double check that everything is working properly then you can fire up your project and browse to &quot;Cassette.axd&quot; in the root. You should see something a bit like this:</p><p><img src="https://1.bp.blogspot.com/-xM9iU6HjB7o/UWzjAN5EieI/AAAAAAAAAaA/EAXTTnD6vdY/s320/CassetteScripts.png"></p><h2 class="anchor anchorWithStickyNavbar_31ik" id="how-web-optimization-and-cassette-differ">How Web Optimization and Cassette Differ<a aria-hidden="true" class="hash-link" href="#how-web-optimization-and-cassette-differ" title="Direct link to heading">â€‹</a></h2><p>If you&#x27;re more familiar with the workings of Web Optimization than Cassette then it&#x27;s probably worth taking a moment to appreciate an important distinction between the slightly different ways each works.</p><p><strong>Web Optimization</strong></p><ol><li>Create bundles as desired.</li><li>Serve up bundles and / or straight JavaScript files as you like within your MVC views / partial views / layouts.</li></ol><p><strong>Cassette</strong></p><ol><li>Create bundles for <!-- -->*<strong>all</strong>*<!-- --> JavaScript files you wish to serve up. You may wish to create some bundles which consist of a number of a number of JavaScript files pushed together. But for each individual file you wish to serve you also need to create an individual bundle. (Failure to do so may mean you fall prey to the &quot;<em>Cannot find an asset bundle containing the path &quot;<!-- -->~<!-- -->/Scripts/somePath.js&quot;.</em>&quot;)</li><li>Reference bundles and / or individual JavaScript files in their individual bundles as you like within your MVC views / partial views / layouts / controllers / HTML helpers... the list goes on!</li><li>Render the referenced scripts to the page (typically just before the closing <code>body</code> tag)</li></ol><h2 class="anchor anchorWithStickyNavbar_31ik" id="making-use-of-our-bundles">Making use of our Bundles<a aria-hidden="true" class="hash-link" href="#making-use-of-our-bundles" title="Direct link to heading">â€‹</a></h2><p>Now we&#x27;ve created our bundles let&#x27;s get the project serving up CSS and JavaScript using Cassette. First the layout file. Take the <code>_Layout.cshtml</code> file from this:</p><script src="https://gist.github.com/johnnyreilly/5393608.js?file=_LayoutBefore.cshtml"></script><p>To this:</p><script src="https://gist.github.com/johnnyreilly/5393608.js?file=_LayoutAfter.cshtml"></script><p>And now let&#x27;s take one of the views, <code>Login.cshtml</code> and take it from this:</p><script src="https://gist.github.com/johnnyreilly/5393608.js?file=LoginBefore.cshtml"></script><p>To this:</p><script src="https://gist.github.com/johnnyreilly/5393608.js?file=LoginAfter.cshtml"></script><p>So now you should be up and running with Cassette. If you want the code behind this then take I&#x27;ve put it on GitHub <a href="https://github.com/johnnyreilly/CassetteDemo" target="_blank" rel="noopener noreferrer">here</a>.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/asp-net-mvc">asp.net mvc</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/andrew-davey">Andrew Davey</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/cassette">cassette</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about How I&#x27;m Using Cassette part 1:Getting Up and Running" href="/2013/05/04/how-im-using-cassette"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/2012/07/01/how-im-structuring-my-javascript-in-web">Optimally Serving Up JavaScript</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2012-07-01T00:00:00.000Z" itemprop="datePublished">July 1, 2012</time> Â· <!-- -->7 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://twitter.com/johnny_reilly" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://blog.johnnyreilly.com/img/profile.jpg" alt="John Reilly"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://twitter.com/johnny_reilly" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">John Reilly</span></a></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>I have occasionally done some server-side JavaScript with Rhino and Node.js but this is the exception rather than the rule. Like most folk at the moment, almost all the JavaScript I write is in a web context.</p><p>Over time I&#x27;ve come to adopt a roughly standard approach to how I structure my JavaScript; both the JavaScript itself and how it is placed / rendered in the an HTML document. I wanted to write about the approach I&#x27;m using. Partly just to document the approach but also because I often find writing about something crystalises my feelings on the subject in one way or another. I think that most of what I&#x27;m doing is sensible and rational but maybe as I write about this I&#x27;ll come to some firmer conclusions about my direction of travel.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="what-are-you-up-to">What are you up to?<a aria-hidden="true" class="hash-link" href="#what-are-you-up-to" title="Direct link to heading">â€‹</a></h2><p>Before I get started it&#x27;s probably worth mentioning the sort of web development I&#x27;m generally called to do (as this has obviously influenced my decisions).</p><p>Most of my work tends to be on web applications used internally within a company. That is to say, web applications accessible on a Company intranet. Consequently, the user base for my applications tends to be smaller than the Amazons and Googles of this world. It almost invariably sits on the ASP.NET stack in some way. Either classic WebForms or MVC.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="render-first-js-second">&quot;Render first. JS second.&quot;<a aria-hidden="true" class="hash-link" href="#render-first-js-second" title="Direct link to heading">â€‹</a></h2><p>I took 2 things away from <a href="http://www.stevesouders.com/blog/2010/09/30/render-first-js-second/" target="_blank" rel="noopener noreferrer">Steve Souder&#x27;s article</a>:</p><ol><li>Async script loading is better than synchronous script loading</li><li>Get your screen rendered and <!-- -->*<strong>then</strong>*<!-- --> execute your JavaScript</li></ol><p>I&#x27;m not doing any async script loading as yet; although I am thinking of giving it a try at some point. In terms of choosing a loader I&#x27;ll probably give RequireJS first crack of the whip (purely as it looks like most people are tending it&#x27;s direction and that can&#x27;t be without reason).</p><p>However - it seems that the concept of async script loading is kind of conflict with one of the other tenets of web wisdom: script bundling. Script bundling, if you&#x27;re not already aware, is the idea that you should combine all your scripts into a single file and then just serve that. This prevents multiple HTTP requests as each script loads in. Async script loading is obviously okay with multiple HTTP requests, presumably because of the asynchronous non-blocking pattern of loading. So. 2 different ideas. And there&#x27;s further movement on this front right now as <a href="http://www.hanselman.com/blog/VisualStudio2012RCIsReleasedTheBigWebRollup.aspx" target="_blank" rel="noopener noreferrer">Microsoft are baking in script bundling to .NET 4.5</a>.</p><p>Rather than divide myself between these 2 horses I have at the moment tried to follow the &quot;JS second&quot; part of this advice in my own (perhaps slightly old fashioned) way...</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="i-want-to-serve-you">I want to serve you...<a aria-hidden="true" class="hash-link" href="#i-want-to-serve-you" title="Direct link to heading">â€‹</a></h2><p>I have been making sure that scripts are the last thing served to the screen by using a customised version of <a href="http://frugalcoder.us/post/2009/06/29/Handling-Scripts-in-ASPNet-MVC.aspx" target="_blank" rel="noopener noreferrer">Michael J. Ryan&#x27;s HtmlHelper</a>. This lovely helper allows you to add script references as required from a number of different sources (layout page, view, partial view etc - even the controller if you so desired). It&#x27;s simple to control the ordering of scripts by allowing you to set a priority for each script which determines the render order.</p><p>Then as a final step before rendering the <code>&amp;lt;/body&amp;gt;</code> tag the scripts can be rendered in one block. By this point the web page is rendered visually and a marginal amount of blocking is, in my view, acceptable.</p><p>If anyone is curious - the class below is my own version of Michael&#x27;s helper. My contribution is the go faster stripes relating to the caching suffix and the ability to specify dependancies using script references rather than using numeric priority mechanism):</p><script src="https://gist.github.com/3019159.js?file=ScriptExtensions.cs"></script><h2 class="anchor anchorWithStickyNavbar_31ik" id="minification---i-want-to-serve-you-less">Minification - I want to serve you less...<a aria-hidden="true" class="hash-link" href="#minification---i-want-to-serve-you-less" title="Direct link to heading">â€‹</a></h2><p>Another tweak I made to the script helper meant that when compiling either the debug or production (minified) versions of common JS files will be included if available. This means in a production environment the users get minified JS files so faster loading. And in a development environment we get the full JS files which make debugging more straightforward.</p><p>What I haven&#x27;t started doing is minifying my own JS files as yet. I know I&#x27;m being somewhat inconsistent here by sometimes serving minified files and sometimes not. I&#x27;m not proud. Part of my rationale for this that since most of my users use my apps on a daily basis they will for the most part be using cached JS files. Obviously there&#x27;ll be slightly slower load times the first time they go to a page but nothing that significant I hope.</p><p>I have thought of starting to do my own minification as a build step but have held off for now. Again this is something being baked into .NET 4.5; another reason why I have held off doing this a different way for now.</p><p>Update</p><p>It now looks like this Microsofts optimisations have become <a href="http://nuget.org/packages/Microsoft.AspNet.Web.Optimization" target="_blank" rel="noopener noreferrer">this Nuget package</a>. It&#x27;s early days (well it was released on 15th August 2012 and I&#x27;m writing this on the 16th) but I think this looks not to be tied to MVC 4 or .NET 4.5 in which case I could use it in my current MVC 3 projects. I hope so...</p><p>By the way there&#x27;s a <a href="http://www.pluralsight.com/training/Courses/TableOfContents/mvc4#mvc4-m3-optimization" target="_blank" rel="noopener noreferrer">nice rundown of how to use this by K. Scott Allen of Pluralsight</a>. It&#x27;s fantastic. Recommended.</p><p>Update 2</p><p>Having done a little asking around I now understand that this <!-- -->*<strong>can</strong>*<!-- --> be used with MVC 3 / .NET 4.0. Excellent!</p><p>One rather nice alternative script serving mechanism I&#x27;ve seen (but not yet used) is Andrew Davey&#x27;s <a href="http://getcassette.net" target="_blank" rel="noopener noreferrer">Cassette</a> which I mean to take for a test drive soon. This looks fantastic (and is available as a <a href="http://nuget.org/packages/Cassette" target="_blank" rel="noopener noreferrer">Nuget package</a> <!-- -->-<!-- --> 10 points!).</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="cdns-they-want-to-serve-you">CDNs (they want to serve you)<a aria-hidden="true" class="hash-link" href="#cdns-they-want-to-serve-you" title="Direct link to heading">â€‹</a></h2><p>I&#x27;ve never professionally made use of CDNs at all. There are <a href="http://encosia.com/3-reasons-why-you-should-let-google-host-jquery-for-you/" target="_blank" rel="noopener noreferrer">clearly good reasons why you should</a> but most of those good reasons relate most to public facing web apps.</p><p>As I&#x27;ve said, the applications I tend to work on sit behind firewalls and it&#x27;s not always guaranteed what my users can see from the grand old world of web beyond. (Indeed what they see can change on hour by hour basis sometimes...) Combined with that, because my apps are only accessible by a select few I don&#x27;t face the pressure to reduce load on the server that public web apps can face.</p><p>So while CDN&#x27;s are clearly a good thing. I don&#x27;t use them at present. And that&#x27;s unlikely to change in the short term.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="tldr">TL:DR<a aria-hidden="true" class="hash-link" href="#tldr" title="Direct link to heading">â€‹</a></h2><ol><li>I don&#x27;t use CDNs - they&#x27;re clearly useful but they don&#x27;t suit my particular needs</li><li>I serve each JavaScript file individually just before the body tag. I don&#x27;t bundle.</li><li>I don&#x27;t minify my own scripts (though clearly it wouldn&#x27;t be hard) but I do serve the minified versions of 3rd party libraries (eg jQuery) in a Production environment.</li><li>I don&#x27;t use async script loaders at present. I may in future; we shall see.</li></ol><p>I expect some of the above may change (well, possibly not point #1) but this general approach is working well for me at present.</p><p>I haven&#x27;t touched at all on how I&#x27;m structuring my JavaScript code itself. Perhaps next time.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/asp-net-mvc">asp.net mvc</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/html-helper">html helper</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/javascript">javascript</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/tags/cassette">cassette</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about Optimally Serving Up JavaScript" href="/2012/07/01/how-im-structuring-my-javascript-in-web"><b>Read More</b></a></div></footer></article></main></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Support me</div><ul class="footer__items"><li class="footer__item"><a href="https://www.buymeacoffee.com/qUBm0Wh" target="_blank"><img src="https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png" alt="Buy Me A Coffee" style="height: 60px !important;width: 217px !important;"></a></li><li class="footer__item"><div style="display: flex; align-items: center;"><iframe src="https://github.com/sponsors/johnnyreilly/button" title="Sponsor johnnyreilly" height="35" width="116" style="border: 0;"></iframe><div>&nbsp;on GitHub</div></div></li></ul></div><div class="col footer__col"><div class="footer__title">Feeds</div><ul class="footer__items"><li class="footer__item"><a href="https://blog.johnnyreilly.com/rss.xml" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>RSS<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://blog.johnnyreilly.com/atom.xml" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Atom<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 John Reilly. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.89fbb0b4.js"></script>
<script src="/assets/js/main.14ca547e.js"></script>
</body>
</html>